!function(e){try{e=angular.module("pfb-views")}catch(t){e=angular.module("pfb-views",[])}e.run(["$templateCache",function(e){e.put("/views/Booking.html",'<div class="row"><div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><h1 class="panel-title">Vielen Dank, Ihre Fahrt ist jetzt gebucht!</h1></div><div class="panel-body"><p class="pull-right hidden-print" role="group"><button class="btn btn-primary btn-xs" type="button" ng-click="showMailForm()"><span class="fa fa-mail-forward"></span> Per Mail senden...</button> <button class="btn btn-info btn-xs" type="button" ng-click="print()"><span class="fa fa-print"></span> Ausdrucken</button></p><p ng-if="request.status == \'Booked\' && request.outstanding > 0">Ihnen sollte in den n&auml;chsten Minuten eine Best&auml;tigung per EMail zugehen. Der Rechnungsbetrag in Höhe von <strong>{{request.outstanding | currency}}</strong> wird erst fällig, wenn wir Ihnen den Auftrag verbindlich bestätigt haben. Dazu erhalten Sie von uns eine separate Auftragsbestätigung.</p><p ng-if="request.status == \'Booked\' && request.outstanding == 0">Ihnen sollte in den n&auml;chsten Minuten eine Best&auml;tigung per EMail zugehen. Bitte beachten Sie, dass der Vertrag erst mit Zusendung der Auftragsbestätigung zustande kommt.</p><div class="clearfix"></div><div class="panel panel-default pull-right ng-cloak" ng-show="isMailFormShown" style="max-width:300px;"><div class="panel-body"><div ng-hide="mailSendSuccess" class="input-group input-group-sm"><input type="text" class="form-control input-sm" placeholder="Email" ng-model="emailForSending"> <span class="input-group-btn"><button class="btn btn-primary btn-sm" type="button" ng-disabled="emailBeingSent" ng-click="sendMail()"><span ng-hide="emailBeingSent"><span class="fa fa-envelope"></span> Senden</span> <span ng-show="emailBeingSent"><span class="fa fa-fw fa-cog fa-spin"></span></span></button></span></div><div ng-show="mailSendSuccess" class="text-success">Email erfolgreich versandt!</div></div></div><div class="clearfix"></div><div class="panel" ng-class="(request.outstanding > 0) ? \'panel-warning\' : \'panel-success\'"><div class="panel-heading"><h2 class="panel-title">Ihre Buchung bei PAUL f&auml;hrt Bus. Nummer: <strong>{{request.number}}</strong></h2></div><div class="panel-body"><div class="row"><div class="col-sm-5"><h4>Rechnungsadresse</h4><address><span ng-if="request.organisation"><strong>{{request.organisation}}</strong><br>z.Hd.</span> <strong>{{request.name}}</strong><br>{{request.address}}<br>{{request.postcode}} {{request.town}}</address><h4>Kontakt</h4><div>Email: <strong>{{request.email}}</strong></div></div><div class="col-sm-7"><h4>Reisedaten</h4><div class="row"><div class="col-xs-2">Fahrt:</div><div class="col-xs-10">Von <strong>{{request.startName}}</strong> nach <strong>{{request.targetName}}</strong></div><div class="col-xs-offset-2 col-xs-10" ng-show="request.busShouldStay"><i class="fa fa-info-circle"></i> Bus bleibt vor Ort</div><div class="col-xs-2">Hinfahrt:</div><div class="col-xs-10">Am <strong>{{request.startDate | date}}</strong>, <span ng-show="request.startTimeMode == \'Departure\'">Abfahrt <strong>{{request.startTimeDepart}}</strong> (Ankunft ca. {{request.startTimeArrive}})</span> <span ng-show="request.startTimeMode == \'Arrival\'">Ankunft <strong>{{request.startTimeArrive}}</strong> (Abfahrt ca. {{request.startTimeDepart}})</span></div><div class="col-xs-2">R&uuml;ckfahrt:</div><div class="col-xs-10"><span ng-show="request.tripType == \'OneWay\'"><strong>Keine R&uuml;ckfahrt</strong></span> <span ng-show="request.tripType == \'Return\'">Am <strong>{{request.returnDate | date}}</strong>, <span ng-show="request.returnTimeMode == \'Departure\'">R&uuml;ckfahrt <strong>{{request.returnTimeDepart}}</strong> (R&uuml;ckkunft ca. {{request.returnTimeArrive}})</span> <span ng-show="request.returnTimeMode == \'Arrival\'">R&uuml;ckkunft <strong>{{request.returnTimeArrive}}</strong> (R&uuml;ckfahrt ca. {{request.returnTimeDepart}})</span></span></div><div class="col-xs-2">Personen:</div><div class="col-xs-10"><strong>{{request.passengers}}</strong></div></div></div></div></div><table class="table table-responsive table-striped table-bordered table-condensed"><tr><th>Leistung</th><th class="text-center">Beschreibung</th><th class="text-right">Preis</th></tr><tr><td><p style="font-weight:bold; font-size:large">{{request.productName}}</p></td><td><div class="text-center" ng-bind-html="request.safeProductDescription"></div></td><td class="text-right">{{request.price | currency}}</td></tr><tr><td class="text-right" colspan="2"><strong>Zwischensumme:</strong></td><td class="text-right">{{request.price | currency}}</td></tr><tr><td class="text-right" colspan="2">enthalten 19% MwSt.:</td><td class="text-right">{{request.price * 0.19 | currency}}</td></tr><tr><td class="text-right" colspan="2"><strong>Gesamtpreis inkl. MwSt.:</strong></td><td class="text-right"><strong>{{request.price | currency}}</strong></td></tr><tr><td class="text-right" colspan="2">Bereits gezahlt:</td><td class="text-right">{{request.paid | currency}}</td></tr><tr><td class="text-right" colspan="2">Differenz:</td><td class="text-right">{{request.outstanding | currency}}</td></tr></table></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("pfb-views")}catch(t){e=angular.module("pfb-views",[])}e.run(["$templateCache",function(e){e.put("/views/CannotQuote.html",'<div class="row"><div class="col-xs-12 col-lg-8 col-lg-offset-2"><div class="panel panel-danger"><div class="panel-heading"><h1 class="panel-title">Gebiet noch nicht verf&uuml;gbar</h1></div><div class="panel-body"><p class="leadx">Leider k&ouml;nnen wir Ihnen in diesem Gebiet momentan kein Angebot machen. Hinterlassen Sie uns Ihre E-Mailadresse und wir melden uns, sobald PAUL in Ihrem Gebiet verf&uuml;gbar ist!</p><form class="form-horizontal" name="register" ng-hide="success"><div class="form-group"><label class="col-sm-2 control-label">Name</label><div class="col-sm-10"><input type="text" class="form-control" placeholder="Ihr Name" required="" ng-model="Name"></div></div><div class="form-group"><label class="col-sm-2 control-label">E-Mail</label><div class="col-sm-10"><input type="email" class="form-control" placeholder="Ihre E-Mailadresse" required="" ng-model="EMail"></div></div><div class="form-group"><div class="col-sm-10 col-sm-offset-2"><button type="submit" class="btn btn-primary btn-block btn-lg" ng-click="submit()" ng-disabled="!register.$valid || !register.$dirty"><span class="fa fa-check"></span> Bitte benachrichtigen Sie mich!</button></div></div></form><div class="alert alert-success" ng-show="success"><span class="fa fa-check-circle"></span> Vielen Dank!</div></div></div></div></div>')}])}(),function(e){try{e=angular.module("pfb-views")}catch(t){e=angular.module("pfb-views",[])}e.run(["$templateCache",function(e){e.put("/views/Landing.html",'<div class="row"><div class="col-lg-12"><div class="alert alert-info"><strong><i class="fa fa-info-circle"></i> Willkommen beim Angebotsassistenten.</strong> Starten Sie, indem Sie Abfahrtsort und Zielort Ihrer Reise eingeben.</div><form name="ctrl.Request"><div class="panel panel-default"><div class="panel-body"><div class="row"><div class="col-sm-4 col-md-4"><div class="form-group-lg has-feedback" ng-class="ctrl.startErrorClass()"><input class="form-control input-lg" type="text" id="StartName" name="StartName" ng-model="StartName" ng-keyup="ctrl.onStartNameEdit()" placeholder="Abfahrtsort (z.B. Berlin)" required="" autocomplete="off"> <span class="glyphicon glyphicon-ok form-control-feedback ng-cloak" ng-show="ctrl.startErrorClass() == \'has-success\'"></span> <span class="glyphicon glyphicon-remove form-control-feedback ng-cloak" ng-show="ctrl.startErrorClass() == \'has-error\'"></span></div><div class="list-group" ng-show="ctrl.startPredictions.length > 0"><a style="cursor:pointer" class="list-group-item" ng-repeat="prediction in ctrl.startPredictions" ng-click="ctrl.setStartPlace(prediction)">{{prediction.description}}</a></div></div><div class="col-sm-4 col-md-4"><div class="form-group-lg has-feedback" ng-class="ctrl.targetErrorClass()"><input class="form-control input-lg" type="text" id="TargetName" name="TargetName" ng-model="TargetName" ng-keyup="ctrl.onTargetNameEdit()" placeholder="Zielort (z.B. Hamburg)" required="" autocomplete="off"> <span class="glyphicon glyphicon-ok form-control-feedback ng-cloak" ng-show="ctrl.targetErrorClass() == \'has-success\'"></span> <span class="glyphicon glyphicon-remove form-control-feedback ng-cloak" ng-show="ctrl.targetErrorClass() == \'has-error\'"></span></div><div class="list-group" ng-show="ctrl.targetPredictions.length > 0"><a style="cursor:pointer" class="list-group-item" ng-repeat="prediction in ctrl.targetPredictions" ng-click="ctrl.setTargetPlace(prediction)">{{prediction.description}}</a></div></div><div class="col-sm-4 col-md-4"><button class="btn btn-primary btn-lg btn-block" type="button" ng-click="ctrl.submitMap()" ng-disabled="ctrl.mapLoading"><span ng-show="ctrl.mapLoading"><span class="fa fa-fw fa-cog fa-spin"></span></span> <span ng-hide="ctrl.mapLoading">Angebot kalkulieren</span></button> <small class="lead-out">Keine Angst. Das Angebot ist unverbindlich.</small></div></div><div ng-if="ctrl.gacValidationMessage.length > 0" class="alert alert-warning"><span class="fa fa-exclamation-circle"></span> {{ctrl.gacValidationMessage}}</div></div></div></form></div></div>')}])}(),function(e){try{e=angular.module("pfb-views")}catch(t){e=angular.module("pfb-views",[])}e.run(["$templateCache",function(e){e.put("/views/OfferExpired.html",'<div class="row"><div class="col-xs-12 col-lg-8 col-lg-offset-2"><div class="panel panel-danger"><div class="panel-heading"><h1 class="panel-title">Angebot verfallen</h1></div><div class="panel-body"><p class="lead">Dieses Angebot ist leider nicht mehr g&uuml;ltig.</p><p class="text-info"><span class="fa fa-info-circle"></span> Klicken Sie <strong>NEU BERECHNEN</strong> um f&uuml;r Ihre Reise einen neuen Sofortpreis zu erhalten. Ihre Reisedaten m&uuml;ssen Sie nicht erneut eingeben.</p><div class="text-center"><a href="#/request/?r={{requestId}}&s=recalc" class="btn btn-primary">Neu berechnen</a></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("pfb-views")}catch(t){e=angular.module("pfb-views",[])}e.run(["$templateCache",function(e){e.put("/views/Order.html",'<div class="row"><div class="col-md-12"><div class="panel panel-primary ng-cloak" ng-show="!redirecting"><div class="panel-heading"><h1 class="panel-title">Ihr Angebot von PAUL f&auml;hrt Bus</h1></div><div class="panel-body"><div class="row"><div class="col-sm-4"><div class="panel panel-default"><div class="panel-heading"><h4 div="" class="panel-title text-center">{{offer.productName}}</h4></div><div class="panel-body"><h2 class="text-center"><strong>{{offer.price / request.passengers | currency}}</strong>/p.P.</h2><p class="text-center"><small>Gesamt {{offer.price | currency}}</small></p><hr><div class="text-center" ng-bind-html="offer.safeProductDescription"></div></div></div></div><div class="col-sm-8"><div class="panel panel-default"><div class="panel-body"><h4>Reisedaten <small><a href="#/request?r={{requestId}}&s=o"><span class="fa fa-pencil"></span> Bearbeiten</a></small></h4><div class="row"><div class="col-xs-2">Fahrt:</div><div class="col-xs-10">Von <strong>{{request.startName}}</strong> nach <strong>{{request.targetName}}</strong></div><div class="col-xs-offset-2 col-xs-10" ng-show="request.busShouldStay"><i class="fa fa-info-circle"></i> Bus bleibt vor Ort</div><div class="col-xs-2">Hinfahrt:</div><div class="col-xs-10">Am <strong>{{request.startDate | date}}</strong>, <span ng-show="request.startTimeMode == \'Departure\'">Abfahrt <strong>{{request.startTimeDepart}}</strong> (Ankunft ca. {{request.startTimeArrive}})</span> <span ng-show="request.startTimeMode == \'Arrival\'">Ankunft <strong>{{request.startTimeArrive}}</strong> (Abfahrt ca. {{request.startTimeDepart}})</span></div><div class="col-xs-2">R&uuml;ckfahrt:</div><div class="col-xs-10"><span ng-show="request.tripType == \'OneWay\'"><strong>Keine R&uuml;ckfahrt</strong></span> <span ng-show="request.tripType == \'Return\'">Am <strong>{{request.returnDate | date}}</strong>, <span ng-show="request.returnTimeMode == \'Departure\'">R&uuml;ckfahrt <strong>{{request.returnTimeDepart}}</strong> (R&uuml;ckkunft ca. {{request.returnTimeArrive}})</span> <span ng-show="request.returnTimeMode == \'Arrival\'">R&uuml;ckkunft <strong>{{request.returnTimeArrive}}</strong> (R&uuml;ckfahrt ca. {{request.returnTimeDepart}})</span></span></div><div class="col-xs-2">Personen:</div><div class="col-xs-10"><strong>{{request.passengers}}</strong></div></div></div></div><h4>Ihre Rechnungsadresse</h4><form class="form-horizontal form-condensed" name="form"><div class="form-group" ng-class="nameValidClass()"><label class="col-sm-3 col-md-2">Name *</label><div class="col-sm-9 col-md-10"><input type="text" class="form-control" name="name" placeholder="Ihr Name" ng-model="name" required=""></div></div><div class="form-group" ng-class="emailValidClass()"><label class="col-sm-3 col-md-2">Email *</label><div class="col-sm-9 col-md-10"><input type="email" class="form-control" name="email" placeholder="Ihre Email" ng-model="email" required=""></div></div><div class="form-group"><label class="col-sm-3 col-md-2">Organisation</label><div class="col-sm-9 col-md-10"><input type="text" class="form-control" name="organisation" placeholder="Ihre Firma oder Arbeitgeber" ng-model="organisation"></div></div><div class="form-group" ng-class="streetValidClass()"><label class="col-sm-3 col-md-2">Strasse *</label><div class="col-sm-9 col-md-10"><input type="text" class="form-control" name="street" ng-model="street" placeholder="Ihre Strasse" required=""></div></div><div class="form-group" ng-class="townValidClass()"><label class="col-sm-3 col-md-2">Stadt *</label><div class="col-sm-9 col-md-10"><input type="text" class="form-control" name="town" ng-model="town" placeholder="Ihre Stadt" required=""></div></div><div class="form-group" ng-class="postcodeValidClass()"><label class="col-sm-3 col-md-2">Postleitzahl&nbsp;*</label><div class="col-sm-9 col-md-10"><input type="text" class="form-control" name="postcode" ng-model="postcode" placeholder="Ihre Postleitzahl" required=""></div></div><div class="form-group"><label class="col-sm-3 col-md-2">Zahlungsart</label><div class="col-sm-9 col-md-10"><div class="radio"><label><input type="radio" ng-model="paymode" value="later"> Sp&auml;ter bezahlen</label><div ng-show="paymode == \'later\'" class="animate-show" style="margin-left:25px"><small>Buchen sie jetzt und bezahlen sie bis zu 7 Tage vor Ihrer Reise</small></div></div><div class="radio"><label><input type="radio" ng-model="paymode" value="now"> Jetzt bezahlen</label><div ng-show="paymode == \'now\'" class="animate-show" style="margin-left:25px"><small>Zahlen sie jetzt sofort per <img src="https://www.paypal.com/de_DE/i/logo/PayPal_mark_37x23.gif"> oder Lastschrift</small></div></div></div></div><div class="form-group"><div class="col-sm-12"><button type="button" class="btn btn-success btn-block btn-lg" ng-click="submit()">Weiter <span class="fa fa-chevron-right"></span></button></div></div></form></div></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("pfb-views")}catch(t){e=angular.module("pfb-views",[])}e.run(["$templateCache",function(e){e.put("/views/OrderConfirm.html",'<div class="row"><div class="col-md-12"><div class="panel panel-primary ng-cloak" ng-show="!redirecting"><div class="panel-heading"><h1 class="panel-title">Bestellung aufgeben</h1></div><div class="panel-body"><p>Vor dem Absenden Ihrer Bestellung haben Sie hier die M&ouml;glichkeit, die von Ihnen eingegebenen Daten und Leistungen zu korrigieren. Den Bestellvorgang k&ouml;nnen Sie jederzeit durch Schlie&szlig;en des Browser-Fensters beenden oder durch Dr&uuml;cken des Bestell-Buttons abschlie&szlig;en.</p><div class="row"><div class="col-sm-5"><h4>Rechnungsadresse <small><a href="#/order/{{requestId}}/{{offerId}}"><span class="fa fa-pencil"></span> Bearbeiten</a></small></h4><address><span ng-if="request.organisation"><strong>{{request.organisation}}</strong><br>z.Hd.</span> <strong>{{request.name}}</strong><br>{{request.address}}<br>{{request.postcode}} {{request.town}}</address><h4>Kontakt <small><a href="#/order/{{requestId}}/{{offerId}}"><span class="fa fa-pencil"></span> Bearbeiten</a></small></h4><div>Email: <strong>{{request.email}}</strong></div></div><div class="col-sm-7"><h4>Reisedaten <small><a href="#/request?r={{requestId}}&s=o"><span class="fa fa-pencil"></span> Bearbeiten</a></small></h4><div class="row" style="margin-bottom:18px;"><div class="col-xs-2">Fahrt:</div><div class="col-xs-10">Von <strong>{{request.startName}}</strong> nach <strong>{{request.targetName}}</strong></div><div class="col-xs-offset-2 col-xs-10" ng-show="request.busShouldStay"><i class="fa fa-info-circle"></i> Bus bleibt vor Ort</div><div class="col-xs-2">Hinfahrt:</div><div class="col-xs-10">Am <strong>{{request.startDate | date}}</strong>, <span ng-show="request.startTimeMode == \'Departure\'">Abfahrt <strong>{{request.startTimeDepart}}</strong> (Ankunft ca. {{request.startTimeArrive}})</span> <span ng-show="request.startTimeMode == \'Arrival\'">Ankunft <strong>{{request.startTimeArrive}}</strong> (Abfahrt ca. {{request.startTimeDepart}})</span></div><div class="col-xs-2">R&uuml;ckfahrt:</div><div class="col-xs-10"><span ng-show="request.tripType == \'OneWay\'"><strong>Keine R&uuml;ckfahrt</strong></span> <span ng-show="request.tripType == \'Return\'">Am <strong>{{request.returnDate | date}}</strong>, <span ng-show="request.returnTimeMode == \'Departure\'">R&uuml;ckfahrt <strong>{{request.returnTimeDepart}}</strong> (R&uuml;ckkunft ca. {{request.returnTimeArrive}})</span> <span ng-show="request.returnTimeMode == \'Arrival\'">R&uuml;ckkunft <strong>{{request.returnTimeArrive}}</strong> (R&uuml;ckfahrt ca. {{request.returnTimeDepart}})</span></span></div><div class="col-xs-2">Personen:</div><div class="col-xs-10"><strong>{{request.passengers}}</strong></div></div><h4>Zahlungsweise <small><a href="#/order/{{requestId}}/{{offerId}}"><span class="fa fa-pencil"></span> Bearbeiten</a></small></h4><div ng-show="paymode == \'later\'"><strong>Sp&auml;ter bezahlen</strong></div><div ng-hide="paymode == \'later\'"><strong>Jetzt bezahlen</strong></div></div></div><p><div class="checkbox" ng-class="acceptedStyle()"><label><input type="checkbox" ng-model="accepted"> Ich habe die <a href="http://static.paulfaehrtbus.de/agb" target="_blank">AGBs <span class="glyphicon glyphicon-new-window"></span></a> der Magnitude Internet GmbH gelesen und erkl&auml;re hiermit mein Einverst&auml;ndnis.</label></div></p><table class="table table-responsive table-striped table-bordered table-condensed"><tr><th>Leistung</th><th class="text-center">Beschreibung</th><th class="text-right">Preis</th></tr><tr><td><p style="font-weight:bold; font-size:large">{{offer.productName}}</p></td><td><div class="text-center" ng-bind-html="offer.safeProductDescription"></div></td><td class="text-right">{{offer.price | currency}}</td></tr><tr><td class="text-right" colspan="2"><strong>Zwischensumme:</strong></td><td class="text-right">{{offer.price | currency}}</td></tr><tr><td class="text-right" colspan="2">enthalten 19% MwSt.:</td><td class="text-right">{{offer.price * 0.19 | currency}}</td></tr><tr><td class="text-right lead" colspan="2"><strong>Gesamtpreis inkl. MwSt.:</strong></td><td class="text-right lead"><strong>{{offer.price | currency}}</strong></td></tr></table><div ng-show="submitted && !accepted" class="text-danger"><strong>Bitte stimmen Sie unseren AGBs zu (siehe oben)!</strong></div><button type="button" class="btn btn-success btn-block btn-lg" ng-click="submit()">Jetzt verbindlich buchen</button></div></div></div></div><div class="row ng-cloak" ng-show="redirecting"><div class="col-sm-6 col-sm-offset-3"><div class="panel panel-default"><div class="panel-body text-center"><p class="lead">Ihre Anfrage wird bearbeitet. Bitte warten...</p><img src="/Content/img/bigLoader.gif" style="margin-bottom:20px;"><div><small>Bitte dr&uuml;cken Sie nicht den Zur&uuml;ck-Knopf in Ihrem Browser</small></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("pfb-views")}catch(t){e=angular.module("pfb-views",[])}e.run(["$templateCache",function(e){e.put("/views/Processing.html",'<div class="row"><div class="col-xs-12 col-lg-8 col-lg-offset-2"><div class="panel panel-default"><div class="panel-body text-center"><p class="lead">Ihre Transaktion wird bearbeitet. Bitte warten...</p><img src="/Content/img/bigLoader.gif" style="margin-bottom:20px;"><div><small>Bitte dr&uuml;cken Sie nicht den Zur&uuml;ck-Knopf in Ihrem Browser</small></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("pfb-views")}catch(t){e=angular.module("pfb-views",[])}e.run(["$templateCache",function(e){e.put("/views/Request.html",'<div class="row ng-cloak" ng-show="ctrl.initFinished"><div class="col-lg-12"><form name="ctrl.Request"><div class="panel panel-default hidden-print"><div class="panel-body"><div class="row"><div class="col-sm-4 col-md-4"><div class="form-group-lg has-feedback" ng-class="ctrl.startErrorClass()"><input class="form-control input-lg" type="text" id="StartName" name="StartName" ng-model="StartName" ng-keyup="ctrl.onStartNameEdit()" placeholder="Abfahrtsort (z.B. Berlin)" required="" autocomplete="off"> <span class="glyphicon glyphicon-ok form-control-feedback ng-cloak" ng-show="ctrl.startErrorClass() == \'has-success\'"></span> <span class="glyphicon glyphicon-remove form-control-feedback ng-cloak" ng-show="ctrl.startErrorClass() == \'has-error\'"></span></div><div class="list-group" ng-show="ctrl.startPredictions.length > 0"><a style="cursor:pointer" class="list-group-item" ng-repeat="prediction in ctrl.startPredictions" ng-click="ctrl.setStartPlace(prediction)">{{prediction.description}}</a></div></div><div class="col-sm-4 col-md-4"><div class="form-group-lg has-feedback" ng-class="ctrl.targetErrorClass()"><input class="form-control input-lg" type="text" id="TargetName" name="TargetName" ng-model="TargetName" ng-keyup="ctrl.onTargetNameEdit()" placeholder="Zielort (z.B. Hamburg)" required="" autocomplete="off"> <span class="glyphicon glyphicon-ok form-control-feedback ng-cloak" ng-show="ctrl.targetErrorClass() == \'has-success\'"></span> <span class="glyphicon glyphicon-remove form-control-feedback ng-cloak" ng-show="ctrl.targetErrorClass() == \'has-error\'"></span></div><div class="list-group" ng-show="ctrl.targetPredictions.length > 0"><a style="cursor:pointer" class="list-group-item" ng-repeat="prediction in ctrl.targetPredictions" ng-click="ctrl.setTargetPlace(prediction)">{{prediction.description}}</a></div></div><div class="col-sm-4 col-md-4 hidden-print"><button class="btn btn-primary btn-lg btn-block" type="button" ng-disabled="mapLoading"><span ng-show="ctrl.mapLoading"><span class="fa fa-fw fa-cog fa-spin"></span></span> <span ng-hide="ctrl.mapLoading">Weiter</span></button></div></div><div ng-if="ctrl.gacValidationMessage.length > 0" class="alert alert-warning"><span class="fa fa-exclamation-circle"></span> {{ctrl.gacValidationMessage}}</div></div></div><div class="panel panel-primary ng-cloak animate-show hidden-print" ng-show="ctrl.showMap" id="mapPanel"><div class="panel-heading"><h2 class="panel-title"><span class="fa fa-location-arrow"></span> Ihre Reise von {{StartName}} nach {{TargetName}}<small>{{ctrl.displayDistance()}}</small></h2></div><div id="map-canvas"></div><div class="panel-body"><div class="row"><div class="col-xs-6 col-sm-5"><div class="row"><div class="col-xs-5"><div><strong>Hinfahrt</strong></div></div><div class="col-xs-7"><div class="checkbox-inline" style="margin-top:-5px"><label style="margin-bottom:0"><input type="checkbox" ng-model="ctrl.busShouldStay" ng-change="ctrl.invalidate(\'dates\')"> Bus vor Ort</label></div></div></div><div class="form-group has-feedback" ng-class="ctrl.startDateErrorClass()" style="margin-bottom:0"><input class="form-control" type="text" id="StartDate" name="StartDate" ui-date="ctrl.dateOptionsStart" ng-model="StartDate" ng-keyup="ctrl.invalidate(\'dates\')" ng-change="ctrl.startDateChanged(StartDate)" placeholder="Hinfahrtsdatum" date-field="" required="" autocomplete="off"> <span class="glyphicon glyphicon-ok form-control-feedback ng-cloak" ng-show="ctrl.startDateErrorClass() == \'has-success\'"></span> <span class="glyphicon glyphicon-remove form-control-feedback ng-cloak" ng-show="ctrl.startDateErrorClass() == \'has-error\'"></span></div><div>&nbsp;</div><div class="row"><div class="col-xs-12 col-sm-3 form-inline"><select ng-model="ctrl.StartTime" ng-init="ctrl.StartTime = \'09:00\'" ng-change="ctrl.invalidate(\'dates\')" class="form-control"><option value="00:00">00:00</option><option value="00:15">00:15</option><option value="00:30">00:30</option><option value="00:45">00:45</option><option value="01:00">01:00</option><option value="01:15">01:15</option><option value="01:30">01:30</option><option value="01:45">01:45</option><option value="02:00">02:00</option><option value="02:15">02:15</option><option value="02:30">02:30</option><option value="02:45">02:45</option><option value="03:00">03:00</option><option value="03:15">03:15</option><option value="03:30">03:30</option><option value="03:45">03:45</option><option value="04:00">04:00</option><option value="04:15">04:15</option><option value="04:30">04:30</option><option value="04:45">04:45</option><option value="05:00">05:00</option><option value="05:15">05:15</option><option value="05:30">05:30</option><option value="05:45">05:45</option><option value="06:00">06:00</option><option value="06:15">06:15</option><option value="06:30">06:30</option><option value="06:45">06:45</option><option value="07:00">07:00</option><option value="07:15">07:15</option><option value="07:30">07:30</option><option value="07:45">07:45</option><option value="08:00">08:00</option><option value="08:15">08:15</option><option value="08:30">08:30</option><option value="08:45">08:45</option><option value="09:00">09:00</option><option value="09:15">09:15</option><option value="09:30">09:30</option><option value="09:45">09:45</option><option value="10:00">10:00</option><option value="10:15">10:15</option><option value="10:30">10:30</option><option value="10:45">10:45</option><option value="11:00">11:00</option><option value="11:15">11:15</option><option value="11:30">11:30</option><option value="11:45">11:45</option><option value="12:00">12:00</option><option value="12:15">12:15</option><option value="12:30">12:30</option><option value="12:45">12:45</option><option value="13:00">13:00</option><option value="13:15">13:15</option><option value="13:30">13:30</option><option value="13:45">13:45</option><option value="14:00">14:00</option><option value="14:15">14:15</option><option value="14:30">14:30</option><option value="14:45">14:45</option><option value="15:00">15:00</option><option value="15:15">15:15</option><option value="15:30">15:30</option><option value="15:45">15:45</option><option value="16:00">16:00</option><option value="16:15">16:15</option><option value="16:30">16:30</option><option value="16:45">16:45</option><option value="17:00">17:00</option><option value="17:15">17:15</option><option value="17:30">17:30</option><option value="17:45">17:45</option><option value="18:00">18:00</option><option value="18:15">18:15</option><option value="18:30">18:30</option><option value="18:45">18:45</option><option value="19:00">19:00</option><option value="19:15">19:15</option><option value="19:30">19:30</option><option value="19:45">19:45</option><option value="20:00">20:00</option><option value="20:15">20:15</option><option value="20:30">20:30</option><option value="20:45">20:45</option><option value="21:00">21:00</option><option value="21:15">21:15</option><option value="21:30">21:30</option><option value="21:45">21:45</option><option value="22:00">22:00</option><option value="22:15">22:15</option><option value="22:30">22:30</option><option value="22:45">22:45</option><option value="23:00">23:00</option><option value="23:15">23:15</option><option value="23:30">23:30</option><option value="23:45">23:45</option></select></div><div class="col-xs-6 col-sm-3" ng-init="StartTimeMode = \'Departure\'"><div class="radio"><label><input type="radio" ng-model="ctrl.StartTimeMode" ng-change="ctrl.invalidate(\'dates\')" value="Departure"> Abfahrt</label></div></div><div class="col-xs-6 col-sm-6"><div class="radio"><label><input type="radio" ng-model="StartTimeMode" ng-change="ctrl.invalidate(\'dates\')" value="Arrival"> Ankunft</label></div></div></div></div><div class="col-xs-6 col-sm-5"><div class="row"><div class="col-xs-5"><div><strong>R&uuml;ckfahrt</strong></div></div><div class="col-xs-7"><div class="checkbox-inline" style="margin-top:-5px"><label style="margin-bottom:0"><input type="checkbox" ng-model="ctrl.isOneWay" ng-change="ctrl.invalidate(\'dates\')" ng-init="ctrl.isOneWay = false"> Keine R&uuml;ckfahrt</label></div></div></div><div class="form-group has-feedback" style="margin-bottom:0" ng-class="ctrl.returnDateErrorClass()" ng-hide="ctrl.isOneWay"><input class="form-control" type="text" id="ReturnDate" name="ReturnDate" ui-date="ctrl.dateOptionsReturn" ng-model="ReturnDate" placeholder="R&uuml;ckfahrtsdatum" ng-keyup="ctrl.invalidate(\'dates\')" ng-change="ctrl.returnDateChanged(ReturnDate)" date-field="" required="" autocomplete="off"> <span class="glyphicon glyphicon-ok form-control-feedback ng-cloak" ng-show="ctrl.returnDateErrorClass() == \'has-success\'"></span> <span class="glyphicon glyphicon-remove form-control-feedback ng-cloak" ng-show="ctrl.returnDateErrorClass() == \'has-error\'"></span></div><div>&nbsp;</div><div class="row" ng-hide="ctrl.isOneWay"><div class="col-xs-12 col-sm-3 form-inline"><select ng-model="ctrl.ReturnTime" ng-init="ctrl.ReturnTime = \'17:00\'" ng-change="ctrl.invalidate(\'dates\')" class="form-control"><option value="00:00">00:00</option><option value="00:15">00:15</option><option value="00:30">00:30</option><option value="00:45">00:45</option><option value="01:00">01:00</option><option value="01:15">01:15</option><option value="01:30">01:30</option><option value="01:45">01:45</option><option value="02:00">02:00</option><option value="02:15">02:15</option><option value="02:30">02:30</option><option value="02:45">02:45</option><option value="03:00">03:00</option><option value="03:15">03:15</option><option value="03:30">03:30</option><option value="03:45">03:45</option><option value="04:00">04:00</option><option value="04:15">04:15</option><option value="04:30">04:30</option><option value="04:45">04:45</option><option value="05:00">05:00</option><option value="05:15">05:15</option><option value="05:30">05:30</option><option value="05:45">05:45</option><option value="06:00">06:00</option><option value="06:15">06:15</option><option value="06:30">06:30</option><option value="06:45">06:45</option><option value="07:00">07:00</option><option value="07:15">07:15</option><option value="07:30">07:30</option><option value="07:45">07:45</option><option value="08:00">08:00</option><option value="08:15">08:15</option><option value="08:30">08:30</option><option value="08:45">08:45</option><option value="09:00">09:00</option><option value="09:15">09:15</option><option value="09:30">09:30</option><option value="09:45">09:45</option><option value="10:00">10:00</option><option value="10:15">10:15</option><option value="10:30">10:30</option><option value="10:45">10:45</option><option value="11:00">11:00</option><option value="11:15">11:15</option><option value="11:30">11:30</option><option value="11:45">11:45</option><option value="12:00">12:00</option><option value="12:15">12:15</option><option value="12:30">12:30</option><option value="12:45">12:45</option><option value="13:00">13:00</option><option value="13:15">13:15</option><option value="13:30">13:30</option><option value="13:45">13:45</option><option value="14:00">14:00</option><option value="14:15">14:15</option><option value="14:30">14:30</option><option value="14:45">14:45</option><option value="15:00">15:00</option><option value="15:15">15:15</option><option value="15:30">15:30</option><option value="15:45">15:45</option><option value="16:00">16:00</option><option value="16:15">16:15</option><option value="16:30">16:30</option><option value="16:45">16:45</option><option value="17:00">17:00</option><option value="17:15">17:15</option><option value="17:30">17:30</option><option value="17:45">17:45</option><option value="18:00">18:00</option><option value="18:15">18:15</option><option value="18:30">18:30</option><option value="18:45">18:45</option><option value="19:00">19:00</option><option value="19:15">19:15</option><option value="19:30">19:30</option><option value="19:45">19:45</option><option value="20:00">20:00</option><option value="20:15">20:15</option><option value="20:30">20:30</option><option value="20:45">20:45</option><option value="21:00">21:00</option><option value="21:15">21:15</option><option value="21:30">21:30</option><option value="21:45">21:45</option><option value="22:00">22:00</option><option value="22:15">22:15</option><option value="22:30">22:30</option><option value="22:45">22:45</option><option value="23:00">23:00</option><option value="23:15">23:15</option><option value="23:30">23:30</option><option value="23:45">23:45</option></select></div><div class="col-xs-6 col-sm-3"><div class="radio" ng-init="ctrl.ReturnTimeMode = \'Departure\'"><label><input type="radio" ng-model="ctrl.ReturnTimeMode" ng-change="ctrl.invalidate(\'dates\')" value="Departure"> Abfahrt</label></div></div><div class="col-xs-6 col-sm-6"><div class="radio"><label><input type="radio" ng-model="ctrl.ReturnTimeMode" ng-change="ctrl.invalidate(\'dates\')" value="Arrival"> Ankunft</label></div></div></div></div><div class="col-xs-12 col-sm-2 hidden-print"><button class="btn btn-primary btn-block btn-lg" type="button" ng-click="ctrl.submitDateSection()">Weiter</button></div></div></div></div><div class="panel panel-primary ng-cloak animate-show hidden-print" ng-show="ctrl.showNameSection" id="namePanel"><div class="panel-heading"><h2 class="panel-title"><span class="fa fa-flag-checkered"></span> Jetzt nur noch diese Angaben</h2></div><div class="panel-body"><p>Bitte geben Sie für ein unverbindliches Angebot oder eventuelle Rückfragen Ihre Kontaktdaten an.</p><div class="form-horizontalxx"><div class="row"><div class="col-sm-6"><div class="form-horizontal form-condensed"><div class="form-group" ng-class="ctrl.passengerErrorClass()"><label for="Passengers" class="col-sm-2 control-label">Personen</label><div class="col-sm-10"><input type="number" id="Passengers" name="Passengers" ng-model="Passengers" ng-keyup="ctrl.passengersEdited()" class="form-control" placeholder="Anzahl (ab 9 Personen)" required="" min="1"></div></div><div class="form-group" ng-class="ctrl.nameErrorClass()"><label for="Name" class="col-sm-2 control-label">Name</label><div class="col-sm-10"><input type="text" id="Name" name="Name" ng-model="Name" class="form-control" placeholder="Ihr vollst&auml;ndiger Vor- und Zuname" required=""></div></div></div></div><div class="col-sm-6"><div class="form-horizontal"><div class="form-group" ng-class="ctrl.emailErrorClass()"><label for="EMail" class="col-sm-2 control-label">E-Mail</label><div class="col-sm-10"><input type="email" id="EMail" name="EMail" ng-model="EMail" class="form-control" placeholder="Ihre E-Mail" required=""></div></div><div class="form-group" ng-class="ctrl.telephoneErrorClass()"><label for="Telephone" class="col-sm-2 control-label">Telefon</label><div class="col-sm-10"><input type="tel" id="Telephone" name="Telephone" ng-model="Telephone" class="form-control" placeholder="Ihre Telefonnummer" required=""></div></div></div></div></div><div class="form-group text-center">Spezielle W&uuml;nsche? Rufen Sie uns an unter <strong>0800 / 28 77 28 5</strong></div><div class="form-group hidden-print"><div class="col-sm-12 text-center"><button class="btn btn-primary btn-lg" type="button" ng-click="ctrl.submitNameSection()" ng-disabled="ctrl.offersLoading"><span ng-show="ctrl.offersLoading"><span class="fa fa-fw fa-cog fa-spin"></span></span> <span ng-hide="ctrl.offersLoading"><span class="fa fa-calculator"></span> unverbindliches Angebot Berechnen</span></button></div></div></div></div></div><div class="panel panel-primary ng-cloak animate-show" ng-show="ctrl.showOfferSection" id="offerPanel"><div class="panel-heading"><h2 class="panel-title">Unser Angebot f&uuml;r Ihre Fahrt von {{StartName}} nach {{TargetName}}</h2></div><div class="panel-body"><div class="row"><div class="col-sm-2 col-xs-4">Anfragenummer:</div><div class="col-sm-4 col-xs-8"><strong>{{ctrl.requestNumber}}</strong></div><div class="col-sm-2 col-xs-4">Personen:</div><div class="col-sm-4 col-xs-8"><strong>{{Passengers}}</strong></div><div class="col-sm-2 col-xs-4">Abfahrtsort:</div><div class="col-sm-4 col-xs-8"><strong>{{StartName}}</strong></div><div class="col-sm-2 col-xs-4">Reiseziel:</div><div class="col-sm-4 col-xs-8"><strong>{{TargetName}}</strong></div><div class="col-sm-offset-8 col-sm-4 col-xs-offset-4 col-xs-8" ng-show="ctrl.busShouldStay"><i class="fa fa-info-circle"></i> Bus bleibt vor Ort</div><div class="col-sm-2 col-xs-4">Hinfahrt:</div><div class="col-sm-4 col-xs-8"><strong>{{StartDate | date}}</strong></div><div class="col-sm-2 col-xs-4">R&uuml;ckfahrt:</div><div class="col-sm-4 col-xs-8" ng-hide="ctrl.isOneWay"><strong>{{ReturnDate | date}}</strong></div><div class="col-sm-4 col-xs-8" ng-show="ctrl.isOneWay"><strong>Keine R&uuml;ckfahrt</strong></div><div class="col-sm-2 col-xs-4" ng-show="ctrl.StartTimeMode == \'Departure\'">Abfahrt:</div><div class="col-sm-4 col-xs-8" ng-show="ctrl.StartTimeMode == \'Departure\'"><strong>{{ctrl.startTimeDepart}}</strong> (Ankunft ca. {{ctrl.startTimeArrive}})</div><div class="col-sm-2 col-xs-4" ng-show="ctrl.StartTimeMode == \'Arrival\'">Ankunft:</div><div class="col-sm-4 col-xs-8" ng-show="ctrl.StartTimeMode == \'Arrival\'"><strong>{{ctrl.startTimeArrive}}</strong> (Abfahrt ca. {{ctrl.startTimeDepart}})</div><div class="col-sm-2 col-xs-4" ng-show="!ctrl.isOneWay && ctrl.ReturnTimeMode == \'Departure\'">Abfahrt:</div><div class="col-sm-4 col-xs-8" ng-show="!ctrl.isOneWay && ctrl.ReturnTimeMode == \'Departure\'"><strong>{{ctrl.returnTimeDepart}}</strong> (Ankunft ca. {{ctrl.returnTimeArrive}})</div><div class="col-sm-2 col-xs-4" ng-show="!ctrl.isOneWay && ctrl.ReturnTimeMode == \'Arrival\'">R&uuml;ckkunft:</div><div class="col-sm-4 col-xs-8" ng-show="!ctrl.isOneWay && ctrl.ReturnTimeMode == \'Arrival\'"><strong>{{ctrl.returnTimeArrive}}</strong> (R&uuml;ckfahrt ca. {{ctrl.returnTimeDepart}})</div></div><div class="pull-right hidden-print" role="group"><button class="btn btn-primary btn-xs" type="button" ng-click="ctrl.showMailForm()"><span class="fa fa-mail-forward"></span> Per Mail senden...</button> <button class="btn btn-info btn-xs" type="button" ng-click="ctrl.print()"><span class="fa fa-print"></span> Ausdrucken</button></div><div class="clearfix"></div><div class="panel panel-default pull-right ng-cloak" ng-show="ctrl.isMailFormShown" style="max-width:300px;"><div class="panel-body"><div ng-hide="ctrl.mailSendSuccess" class="input-group input-group-sm"><input type="text" class="form-control input-sm" placeholder="Email" ng-model="ctrl.emailForSending"> <span class="input-group-btn"><button class="btn btn-primary btn-sm" type="button" ng-disabled="ctrl.emailBeingSent" ng-click="ctrl.sendMail()"><span ng-hide="ctrl.emailBeingSent"><span class="fa fa-envelope"></span> Senden</span> <span ng-show="ctrl.emailBeingSent"><span class="fa fa-fw fa-cog fa-spin"></span></span></button></span></div><div ng-show="ctrl.mailSendSuccess" class="text-success">Email erfolgreich versandt!</div></div></div><div class="clearfix"></div><hr><div ng-if="ctrl.offers.length == 0 && !offersLoading" class="lead text-center hidden-print">Leider k&ouml;nnen wir Ihnen im Moment kein Online-Angebot machen. Bitte rufen Sie uns an unter:<br><strong>0800 / 28 77 28 5</strong></div><div class="row visible-print"><div class="col-xs-4" ng-repeat="offer in ctrl.offers"><div class="panel panel-default"><div class="panel-heading"><h4 div="" class="panel-title text-center">{{offer.productName}}</h4></div><div class="panel-body"><h2 ng-if="!offer.noOffer" class="text-center"><strong>{{offer.price / Passengers | currency}}</strong>/p.P.</h2><p ng-if="!offer.noOffer" class="text-center"><small>Gesamt {{offer.price | currency}}</small></p><h2 ng-if="offer.noOffer" class="text-center">- €/p.P.</h2><p ng-if="offer.noOffer" class="text-center"><small>Gesamt - €</small></p><hr><div><div class="text-center" ng-bind-html="offer.safeProductDescription"></div></div></div></div></div></div><div class="visible-print text-center">Haben Sie Fragen oder spezielle W&uuml;nsche? Rufen Sie uns an unter <strong>0800 / 28 77 28 5</strong></div><div class="row hidden-print"><div class="col-sm-4" ng-repeat="offer in ctrl.offers"><div class="panel panel-default"><div class="panel-heading"><h4 div="" class="panel-title text-center">{{offer.productName}}</h4></div><div class="panel-body"><h2 ng-if="!offer.noOffer" class="text-center"><strong>{{offer.price / Passengers | currency}}</strong>/p.P.</h2><p ng-if="!offer.noOffer" class="text-center"><small>Gesamt {{offer.price | currency}}</small></p><h2 ng-if="offer.noOffer" class="text-center">- €/p.P.</h2><p ng-if="offer.noOffer" class="text-center"><small>Gesamt - €</small></p><hr><div style="min-height:100px;margin-bottom:10px;"><div class="text-center" ng-bind-html="offer.safeProductDescription"></div></div><a ng-if="!offer.noOffer" href="#/order/{{offer.requestId}}/{{offer.offerId}}" class="btn btn-success btn-lg btn-block hidden-print">Zum Angebot <span class="glyphicon glyphicon-chevron-right"></span></a> <a ng-if="offer.noOffer" class="btn btn-warning btn-lg btn-block hidden-print" href="#/specialRequest/{{requestId}}">Anfragen <span class="glyphicon glyphicon-chevron-right"></span></a></div></div></div></div></div></div></form></div></div>');
}])}(),function(e){try{e=angular.module("pfb-views")}catch(t){e=angular.module("pfb-views",[])}e.run(["$templateCache",function(e){e.put("/views/SpecialRequest.html",'<div class="row"><div class="col-xs-12 col-lg-8 col-lg-offset-2"><div class="panel panel-default"><div class="panel-heading"><h1 class="panel-title">Haben Sie spezielle W&uuml;nsche?</h1></div><div class="panel-body"><p class="lead">Kein Problem! Sagen Sie uns, wie wir helfen k&ouml;nnen.</p><div class="well well-sm"><h4>Reisedaten <small><a href="#/request?r={{requestId}}&s=o"><span class="fa fa-pencil"></span> Bearbeiten</a></small></h4><div class="row"><div class="col-xs-2">Fahrt:</div><div class="col-xs-10">Von <strong>{{request.startName}}</strong> nach <strong>{{request.targetName}}</strong></div><div class="col-xs-offset-2 col-xs-10" ng-show="request.busShouldStay"><i class="fa fa-info-circle"></i> Bus bleibt vor Ort</div><div class="col-xs-2">Hinfahrt:</div><div class="col-xs-10">Am <strong>{{request.startDate | date}}</strong>, <span ng-show="request.startTimeMode == \'Departure\'">Abfahrt <strong>{{request.startTimeDepart}}</strong> (Ankunft ca. {{request.startTimeArrive}})</span> <span ng-show="request.startTimeMode == \'Arrival\'">Ankunft <strong>{{request.startTimeArrive}}</strong> (Abfahrt ca. {{request.startTimeDepart}})</span></div><div class="col-xs-2">R&uuml;ckfahrt:</div><div class="col-xs-10"><span ng-show="request.tripType == \'OneWay\'"><strong>Keine R&uuml;ckfahrt</strong></span> <span ng-show="request.tripType == \'Return\'">Am <strong>{{request.returnDate | date}}</strong>, <span ng-show="request.returnTimeMode == \'Departure\'">R&uuml;ckfahrt <strong>{{request.returnTimeDepart}}</strong> (R&uuml;ckkunft ca. {{request.returnTimeArrive}})</span> <span ng-show="request.returnTimeMode == \'Arrival\'">R&uuml;ckkunft <strong>{{request.returnTimeArrive}}</strong> (R&uuml;ckfahrt ca. {{request.returnTimeDepart}})</span></span></div><div class="col-xs-2">Personen:</div><div class="col-xs-10"><strong>{{request.passengers}}</strong></div></div></div><form class="form-horizontal" name="form" ng-hide="success"><div class="form-group"><label class="col-sm-2 control-label">Anfrage</label><div class="col-sm-10"><textarea rows="5" class="form-control" required="" ng-model="SpecialRequests" placeholder="Ihre Anforderungen"></textarea></div></div><div class="form-group"><div class="col-sm-10 col-sm-offset-2"><button type="submit" class="btn btn-primary btn-block btn-lg" ng-click="submit()"><span class="fa fa-envelope"></span> Anfragen</button></div></div></form><div class="alert alert-success" ng-show="success"><span class="fa fa-check-circle"></span> Vielen Dank! Wir melden uns umgehend bei Ihnen.</div></div></div></div></div>')}])}();var pfb;!function(e){var t=function(){function e(e,t){this.routeProvider=e,this.locationProvider=t,this.routeProvider.when("/",{reloadOnSearch:!1,templateUrl:"/views/Landing.html",controller:"LandingController as ctrl"}).when("/von-:startSearch",{reloadOnSearch:!1,templateUrl:"/views/Landing.html",controller:"LandingController as ctrl"}).when("/nach-:targetSearch",{reloadOnSearch:!1,templateUrl:"/views/Landing.html",controller:"LandingController as ctrl"}).when("/von-:startSearch/nach-:targetSearch",{reloadOnSearch:!1,templateUrl:"/views/Landing.html",controller:"LandingController as ctrl"}).when("/request",{reloadOnSearch:!1,templateUrl:"/views/Request.html",controller:"RequestController as ctrl"}).when("/order/:requestId/:offerId",{templateUrl:"/views/Order.html",controller:"OrderController as ctrl",resolve:{offer:["requestService","$route",function(e,t){return e.offer(t.current.params.requestId,t.current.params.offerId)}],request:["requestService","$route",function(e,t){return e.get(t.current.params.requestId)}]}}).when("/orderconfirm/:requestId/:offerId/:paymode",{templateUrl:"/views/OrderConfirm.html",controller:"OrderConfirmController as ctrl",resolve:{offer:["requestService","$route",function(e,t){return e.offer(t.current.params.requestId,t.current.params.offerId)}],request:["requestService","$route",function(e,t){return e.get(t.current.params.requestId)}]}}).when("/booking/:requestId",{templateUrl:"/views/Booking.html",controller:"BookingController as ctrl",resolve:{request:["requestService","$route",function(e,t){return e.get(t.current.params.requestId)}]}}).when("/cannotQuote/:requestId",{templateUrl:"/views/CannotQuote.html",controller:"CannotQuoteController as ctrl",resolve:{request:["requestService","$route",function(e,t){return e.get(t.current.params.requestId)}]}}).when("/offerExpired/:requestId",{templateUrl:"/views/OfferExpired.html",controller:"OfferExpiredController as ctrl",resolve:{request:["requestService","$route",function(e,t){return e.get(t.current.params.requestId)}]}}).when("/specialRequest/:requestId",{templateUrl:"/views/SpecialRequest.html",controller:"SpecialRequestController as ctrl",resolve:{request:["requestService","$route",function(e,t){return e.get(t.current.params.requestId)}]}}).when("/payment/:result/:requestId/:paymentId/:offerId",{templateUrl:"/views/Processing.html",controller:"PaymentController as ctrl"}).otherwise({redirectTo:"/"}),PFBConfig.html5Routing&&PFBConfig.html5Routing.valueOf()&&this.locationProvider.html5Mode(!0)}return e.$inject=["$routeProvider","$locationProvider"],e}(),s=angular.module("pfb",["pfb-views","ngAnimate","ngRoute","ui.bootstrap","ui.date"]);s.config(t)}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s,r,i,a){this.routeParamsService=e,this.windowService=t,this.sceService=s,this.timeOutService=r,this.mailerService=i,this.request=a,this.isMailFormShown=!1,this.emailBeingSent=!1,this.mailSendSuccess=!1,this.requestId=e.requestId,this.emailForSending=a.email,this.request.safeProductDescription=this.sceService.trustAsHtml(this.request.productDescription),$("body,html").scrollTop(0)}return e.prototype.print=function(){this.windowService.print()},e.prototype.showMailForm=function(){this.isMailFormShown=!0},e.prototype.sendMail=function(){var e=this;this.emailBeingSent=!0,this.mailerService.sendMail({Id:this.requestId,Type:"orderconfirmation",Email:this.emailForSending}).then(function(t){e.emailBeingSent=!1,e.mailSendSuccess=!0,e.timeOutService(function(){e.mailSendSuccess=!1,e.isMailFormShown=!1},2e3)},function(e){})},e.$inject=["$routeParams","$window","$sce","$timeout","MailerService","request"],e}();angular.module("pfb").controller("BookingController",t)}(t=e.Controllers||(e.Controllers={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s){this.routeParamsService=e,this.requestService=t,this.success=!1,this.request=s.data,this.requestId=this.routeParamsService.requestId,$("body,html").scrollTop(0)}return e.prototype.submit=function(){var e=this;$("body,html").scrollTop(0),this.requestService.update({requestId:this.requestId,name:this.Name,email:this.EMail}).then(function(){e.success=!0},function(){})},e.$inject=["$routeParams","RequestService","request"],e}();angular.module("pfb").controller("CannotQuoteController",t)}(t=e.Controllers||(e.Controllers={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s,r,i,a,n){var o=this;this.locationService=e,this.routeParamsService=t,this.timeoutService=s,this.requestService=r,this.gacService=i,this.analyticsService=a,this.utilService=n,this.requestId="",this.startIsValid=!1,this.targetIsValid=!1,this.StartLatLng=null,this.TargetLatLng=null,this.StartCountry="",this.TargetCountry="",this.mapSubmitted=!1,this.mapLoading=!1,this.startAutocomplete=null,this.targetAutocomplete=null,this.startPredictions=[],this.targetPredictions=[],this.gacValidationMessage="",this.ValueTrack={},this.distance=0,this.duration=0;var l=this.locationService.search();if(l.hasOwnProperty("k")&&(this.ValueTrack.KeyWord=l.k),l.hasOwnProperty("d")&&(this.ValueTrack.Device=l.d),l.hasOwnProperty("m")&&(this.ValueTrack.MatchType=l.m),this.locationService.search("k",null),this.locationService.search("d",null),this.locationService.search("m",null),""!=this.routeParamsService.startSearch){this.routeParamsService.startSearch;this.gacService.autocomplete(this.routeParamsService.startSearch).then(function(e){o.setStartPlace(e[0])})}""!=this.routeParamsService.targetSearch&&this.gacService.autocomplete(this.routeParamsService.targetSearch).then(function(e){o.setTargetPlace(e[0])}),$("body,html").scrollTop(0)}return e.prototype.startErrorClass=function(){return this.Request.StartName.$dirty||this.mapSubmitted?this.startIsValid?"has-success":"has-error":""},e.prototype.targetErrorClass=function(){return this.Request.TargetName.$dirty||this.mapSubmitted?this.targetIsValid?"has-success":"has-error":""},e.prototype.submitMap=function(){this.mapSubmitted=!0},e.prototype.redirectIfReady=function(){var e=this;return null==this.StartLatLng||null==this.TargetLatLng?(this.distance=0,void(this.duration=0)):(this.analyticsService.buttonclick("landing"),this.mapLoading=!0,void this.requestService.create().then(function(t){e.requestId=t;var s=$.extend({},e.ValueTrack,{RequestId:e.requestId,StartName:e.Request.StartName.$modelValue,StartCountry:e.StartCountry,StartLat:e.StartLat,StartLon:e.StartLon,TargetName:e.Request.TargetName.$modelValue,TargetCountry:e.TargetCountry,TargetLat:e.TargetLat,TargetLon:e.TargetLon});return e.requestService.update(s)}).then(function(t){"CannotQuote"==t.data.status?e.locationService.path("/cannotQuote/"+e.requestId):(e.locationService.path("/request"),e.locationService.search("r",e.requestId),e.locationService.search("s","d"))}))},e.prototype.onStartNameEdit=function(){var e=this;this.startIsValid=!1,this.gacValidationMessage="";var t=this.Request.StartName.$modelValue;""!=t&&this.gacService.autocomplete(t).then(function(t){e.startPredictions=t},function(t){e.startPredictions=[]})},e.prototype.onTargetNameEdit=function(){var e=this;this.targetIsValid=!1,this.gacValidationMessage="";var t=this.Request.TargetName.$modelValue;""!=t&&this.gacService.autocomplete(t).then(function(t){e.targetPredictions=t},function(t){e.targetPredictions=[]})},e.prototype.isCountry=function(e){for(var t=0;t<e.types.length;++t)if("country"===e.types[t])return!0;return!1},e.prototype.setStartPlace=function(e){var t=this;this.gacService.details(e.place_id).then(function(e){var s=e;if(t.isCountry(s))return void(t.gacValidationMessage="Ein Land kann nicht als Abfahrtsort gewählt werden!");if(s.geometry){t.gacValidationMessage="";var r=s.geometry.location;t.StartLat=r.lat,t.StartLon=r.lng,"Deutschland"===s.formatted_address?t.Request.StartName.$setViewValue(s.name+", "+s.formatted_address):t.Request.StartName.$setViewValue(s.formatted_address),t.Request.StartName.$render(),t.startIsValid=!0,t.startPredictions=[],t.StartLatLng=s.geometry.location,t.StartCountry=t.utilService.getPlaceCountry(s),t.redirectIfReady()}})},e.prototype.setTargetPlace=function(e){var t=this;this.gacService.details(e.place_id).then(function(e){var s=e;if(t.isCountry(s))return void(t.gacValidationMessage="Ein Land kann nicht als Ziel gewählt werden!");if(s.geometry){t.gacValidationMessage="";var r=s.geometry.location;t.TargetLat=r.lat,t.TargetLon=r.lng,"Deutschland"===s.formatted_address?t.Request.TargetName.$setViewValue(s.name+", "+s.formatted_address):t.Request.TargetName.$setViewValue(s.formatted_address),t.Request.TargetName.$render(),t.targetIsValid=!0,t.targetPredictions=[],t.TargetLatLng=s.geometry.location,t.TargetCountry=t.utilService.getPlaceCountry(s),t.redirectIfReady()}})},e.prototype.cumulativeOffset=function(e){var t=0,s=0;do t+=e.offsetTop||0,s+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:s}},e.prototype.onDownArrowClick=function(){var e=this;this.timeoutService(function(){var t=document.getElementById("mainNavbar"),s=(t.clientHeight,document.getElementById("downArrow")),r=e.cumulativeOffset(s).top;$("body,html").animate({scrollTop:r},"slow")})},e.$inject=["$location","$routeParams","$timeout","RequestService","gacService","AnalyticsService","UtilService"],e}();angular.module("pfb").controller("LandingController",t)}(t=e.Controllers||(e.Controllers={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s){this.locationService=e,this.routeParamsService=t,this.success=!1,this.request=s.data,this.requestId=this.routeParamsService.requestId,this.locationService.search("r",null),this.locationService.search("s",null),$("body,html").scrollTop(0)}return e.$inject=["$location","$routeParams","request"],e}();angular.module("pfb").controller("OfferExpiredController",t)}(t=e.Controllers||(e.Controllers={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s,r,i,a,n){this.routeParamsService=e,this.sceService=t,this.logService=s,this.windowService=r,this.bookingService=i,this.reserve={},this.redirecting=!1,this.submitted=!1,this.accepted=!1,this.offer=n.data,this.request=a.data,this.name=this.request.name,this.requestId=this.routeParamsService.requestId,this.offerId=this.routeParamsService.offerId,this.paymode=this.routeParamsService.paymode,this.offer.safeProductDescription=this.sceService.trustAsHtml(this.offer.productDescription),$("body,html").scrollTop(0)}return e.prototype.acceptedStyle=function(){return this.submitted?this.accepted?"has-success":["has-error","emphasised"]:""},e.prototype.submit=function(){var e=this;this.submitted=!0,this.accepted&&($("body,html").scrollTop(0),this.redirecting=!0,this.bookingService.book({RequestId:this.requestId,OfferId:this.offerId,PayMode:this.paymode}).then(function(t){e.logService.info(t),"Redirect"==t.result&&(e.windowService.location.href=t.data)},function(e){}))},e.$inject=["$routeParams","$sce","$log","$window","BookingService","request","offer"],e}();angular.module("pfb").controller("OrderConfirmController",t)}(t=e.Controllers||(e.Controllers={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s,r,i,a){this.locationService=e,this.routeParamsService=t,this.sceService=s,this.requestService=r,this.form={},this.paymode="later",this.submitted=!1,this.offer=a.data,this.request=i.data,this.name=this.request.name,this.email=this.request.email,this.organisation=this.request.organisation,this.street=this.request.address,this.town=this.request.town,this.postcode=this.request.postcode,this.requestId=this.routeParamsService.requestId,this.offerId=this.routeParamsService.offerId,this.offer.safeProductDescription=this.sceService.trustAsHtml(this.offer.productDescription),$("body,html").scrollTop(0)}return e.prototype.nameValidClass=function(){return this.form.name.$dirty||this.submitted?this.form.name.$valid?"has-success":"has-error":""},e.prototype.emailValidClass=function(){return this.form.email.$dirty||this.submitted?this.form.email.$valid?"has-success":"has-error":""},e.prototype.streetValidClass=function(){return this.form.street.$dirty||this.submitted?this.form.street.$valid?"has-success":"has-error":""},e.prototype.townValidClass=function(){return this.form.town.$dirty||this.submitted?this.form.town.$valid?"has-success":"has-error":""},e.prototype.postcodeValidClass=function(){return this.form.postcode.$dirty||this.submitted?this.form.postcode.$valid?"has-success":"has-error":""},e.prototype.submit=function(){var e=this;if(this.submitted=!0,this.form.$valid){var t={requestId:this.requestId,name:this.name,email:this.email,organisation:this.organisation,address:this.street,town:this.town,postcode:this.postcode};this.requestService.update(t).then(function(){e.locationService.path("/orderconfirm/"+e.requestId+"/"+e.offerId+"/"+e.paymode)},function(){})}},e.$inject=["$location","$routeParams","$sce","RequestService","request","offer"],e}();angular.module("pfb").controller("OrderController",t)}(t=e.Controllers||(e.Controllers={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s){var r=this;this.locationService=e,this.routeParamsService=t,this.bookingService=s,0===this.locationService.path().lastIndexOf("/payment/",0)&&this.bookingService.pay({requestId:this.routeParamsService.requestId,paymentId:this.routeParamsService.paymentId,result:this.routeParamsService.result}).then(function(e){r.locationService.path("/booking/"+r.routeParamsService.requestId)},function(e){r.locationService.path("/offer/"+r.routeParamsService.requestId+"/"+r.routeParamsService.offerId)})}return e.$inject=["$location","$routeParams","BookingService"],e}();angular.module("pfb").controller("PaymentController",t)}(t=e.Controllers||(e.Controllers={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s,r,i,a,n,o,l,c,u){this.locationService=e,this.logService=t,this.sceService=s,this.qService=r,this.timeoutService=i,this.windowService=a,this.requestService=n,this.gacService=o,this.utilService=l,this.analyticsService=c,this.mailerService=u,this.locked=!0,this.requestId="",this.startIsValid=!1,this.targetIsValid=!1,this.startPredictions=[],this.targetPredictions=[],this.StartCountry="",this.TargetCountry="",this.showMap=!1,this.showNameSection=!1,this.distance=0,this.duration=0,this.map=null,this.StartLatLng=null,this.TargetLatLng=null,this.ds=new google.maps.DirectionsService,this.dr=new google.maps.DirectionsRenderer,this.offers=[],this.initFinished=!1,this.mapLoading=!1,this.offersLoading=!1,this.requestNumber=0,this.gacValidationMessage="",this.dateSectionSubmitted=!1,this.startTimeArrive="",this.startTimeDepart="",this.returnTimeArrive="",this.returnTimeDepart="",this.nameSectionSubmitted=!1,this.isMailFormShown=!1,this.emailForSending="",this.emailBeingSent=!1,this.mailSendSuccess=!1,this.showOfferSection=!1,this.busShouldStay=!1,this.isOneWay=!1,this.dateOptionsStart=$.extend({},$.datepicker.regional.de,{minDate:"+1w",numberOfMonths:3}),this.dateOptionsReturn=$.extend({},$.datepicker.regional.de,{minDate:"+1w",numberOfMonths:3}),this.detectInitialState()}return e.prototype.startErrorClass=function(){return this.startIsValid?"has-success":"has-error"},e.prototype.targetErrorClass=function(){return this.targetIsValid?"has-success":"has-error"},e.prototype.onStartNameEdit=function(){var e=this;if(this.initFinished){this.gacValidationMessage="";var t=this.Request.StartName.$modelValue;this.startIsValid=!1,this.getRequestId().then(function(){e.setStatus(""),""!=t&&e.gacService.autocomplete(t).then(function(t){e.startPredictions=t},function(t){e.startPredictions=[]})})}},e.prototype.onTargetNameEdit=function(){var e=this;if(this.initFinished){this.gacValidationMessage="";var t=this.Request.TargetName.$modelValue;this.targetIsValid=!1,this.getRequestId().then(function(){e.setStatus(""),""!=t&&(e.targetIsValid=!1,e.gacService.autocomplete(t).then(function(t){e.targetPredictions=t},function(t){e.targetPredictions=[]}))})}},e.prototype.isCountry=function(e){for(var t=0;t<e.types.length;++t)if("country"===e.types[t])return!0;return!1},e.prototype.setStartPlace=function(e){var t=this;this.gacService.details(e.place_id).then(function(e){var s=e;if(t.isCountry(s))return void(t.gacValidationMessage="Ein Land kann nicht als Abfahrtsort gewählt werden!");if(s.geometry){t.gacValidationMessage="";var r=s.geometry.location;t.StartLat=r.lat,t.StartLon=r.lng,"Deutschland"===s.formatted_address?t.Request.StartName.$setViewValue(s.name+", "+s.formatted_address):t.Request.StartName.$setViewValue(s.formatted_address),t.Request.StartName.$render(),t.startIsValid=!0,t.startPredictions=[],t.StartLatLng=new google.maps.LatLng(r.lat,r.lng),t.StartCountry=t.utilService.getPlaceCountry(s),t.renderMapIfReady(!0)}})},e.prototype.setTargetPlace=function(e){var t=this;this.gacService.details(e.place_id).then(function(e){var s=e;if(t.isCountry(s))return void(t.gacValidationMessage="Ein Land kann nicht als Ziel gewählt werden!");if(s.geometry){t.gacValidationMessage="";var r=s.geometry.location;t.TargetLat=r.lat,t.TargetLon=r.lng,"Deutschland"===s.formatted_address?t.Request.TargetName.$setViewValue(s.name+", "+s.formatted_address):t.Request.TargetName.$setViewValue(s.formatted_address),t.Request.TargetName.$render(),t.targetIsValid=!0,t.targetPredictions=[],t.TargetLatLng=s.geometry.location,t.TargetLatLng=new google.maps.LatLng(r.lat,r.lng),t.TargetCountry=t.utilService.getPlaceCountry(s),t.renderMapIfReady(!0)}})},e.prototype.setStatus=function(e){var t=this;this.locked&&(this.locationService.search("s","o"),e="o"),this.locationService.search("s",e),"d"===e?(this.utilService.scrollTo("mapPanel"),this.showMap=!0,this.showNameSection=!1,this.showOfferSection=!1,this.analyticsService.pageview("/app/dates")):"n"===e?(this.showMap=!0,this.showNameSection=!0,this.showOfferSection=!1,this.utilService.scrollTo("namePanel"),this.analyticsService.pageview("/app/passengers")):"o"===e?(this.locked=!0,this.offersLoading=!0,this.requestService.offers(this.requestId).then(function(e){t.offers=e,angular.forEach(t.offers,function(e){e.safeProductDescription=t.sceService.trustAsHtml(e.productDescription)}),t.offersLoading=!1}),this.showMap=!0,this.showNameSection=!0,this.showOfferSection=!0,this.utilService.scrollTo("offerPanel"),this.analyticsService.pageview("/app/offers")):(this.showMap=!1,this.showNameSection=!1,this.showOfferSection=!1,this.analyticsService.pageview("/app/places"))},e.prototype.pad2Digits=function(e){var t="0"+e;return t.substr(t.length-2)},e.prototype.getRequestId=function(){var e=this,t=this.qService.defer();return this.locked?this.requestService.create().then(function(t){e.locationService.search("r",t),e.requestId=t,e.locked=!1,e.showOfferSection=!1},function(e){t.reject(e)}):t.resolve(),t.promise},e.prototype.save=function(e){var t=this,s=this.qService.defer();return this.getRequestId().then(function(){var e=(t.Request.StartDate.$modelValue,{requestId:t.requestId,startName:t.Request.StartName.$modelValue,startCountry:t.StartCountry,startLat:t.StartLat,startLon:t.StartLon,targetName:t.Request.TargetName.$modelValue,targetCountry:t.TargetCountry,targetLat:t.TargetLat,targetLon:t.TargetLon,distance:t.distance,duration:t.duration,startDate:t.utilService.isoDateString(t.Request.StartDate.$modelValue),startTime:t.StartTime,startTimeMode:t.StartTimeMode,returnDate:t.utilService.isoDateString(t.Request.ReturnDate.$modelValue),returnTime:t.ReturnTime,returnTimeMode:t.ReturnTimeMode,passengers:t.Request.Passengers.$modelValue,name:t.Request.Name.$modelValue,email:t.Request.EMail.$modelValue,phone:t.Request.Telephone.$modelValue,tripType:t.isOneWay?"OneWay":"Return",busShouldStay:t.busShouldStay});return t.requestService.update(e)},function(e){s.reject(e)}).then(function(r){"CannotQuote"==r.status&&(t.locationService.path("/cannotQuote/"+t.requestId),t.locationService.search({})),t.startTimeArrive=r.startTimeArrive,t.startTimeDepart=r.startTimeDepart,t.returnTimeArrive=r.returnTimeArrive,t.returnTimeDepart=r.returnTimeDepart,t.requestNumber=r.number,e&&t.setStatus(e.valueOf()),s.resolve(r)},function(e){s.reject(e)}),s.promise},e.prototype.invalidate=function(e){this.initFinished&&("start"===e?(this.startIsValid=!1,this.StartLatLng=null,this.locationService.search("s",""),this.showMap=!1,this.showNameSection=!1,this.showOfferSection=!1):"target"===e?(this.targetIsValid=!1,this.TargetLatLng=null,this.locationService.search("s",""),this.showMap=!1,this.showNameSection=!1,this.showOfferSection=!1):"dates"===e&&(this.locationService.search("s","d"),this.showNameSection=!1,this.showOfferSection=!1,this.showOfferSection=!1))},e.prototype.displayDistance=function(){if(0==this.duration)return"";var e=Math.floor(this.duration/60),t=this.duration-60*e,s=" "+this.distance+" km, ";return 0==e||(1==e?s+=" 1 Stunde ":s=s+e+" Stunden "),1==t?s+=" 1 Minute":s=s+t+" Minuten",s},e.prototype.renderMapIfReady=function(e){var t=this;return null==this.StartLatLng||null==this.TargetLatLng?(this.distance=0,void(this.duration=0)):(this.mapLoading=!0,this.showMap=!0,void this.timeoutService(function(){if(null==t.map){var s={scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,center:new google.maps.LatLng(50,10),zoom:5};t.map=new google.maps.Map(document.getElementById("map-canvas"),s),t.dr.setMap(t.map)}e&&t.utilService.scrollTo("mapPanel"),t.ds.route({origin:t.StartLatLng,destination:t.TargetLatLng,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC},function(s,r){r==google.maps.DirectionsStatus.OK?(t.dr.setDirections(s),e?t.save().then(function(e){t.distance=e.distance,t.duration=e.duration,t.setStatus("d"),t.mapLoading=!1}):t.mapLoading=!1):(t.distance=0,t.duration=0,t.mapLoading=!1)})}))},e.prototype.startDateChanged=function(e){this.dateOptionsReturn.minDate=e,this.Request.ReturnDate.$setViewValue(e),this.Request.ReturnDate.$render(),this.invalidate("dates")},e.prototype.returnDateChanged=function(e){this.dateOptionsStart.maxDate=e,this.invalidate("dates")},e.prototype.isDateSectionValid=function(){return this.Request.StartDate.$valid&&this.Request.ReturnDate.$valid},e.prototype.startDateErrorClass=function(){return this.Request.StartDate.$dirty||this.dateSectionSubmitted?this.Request.StartDate.$valid?"has-success":"has-error":""},e.prototype.returnDateErrorClass=function(){return this.Request.ReturnDate.$dirty||this.dateSectionSubmitted?this.Request.ReturnDate.$valid?"has-success":"has-error":""},e.prototype.submitDateSection=function(){this.dateSectionSubmitted=!0,this.analyticsService.buttonclick("dates"),this.isDateSectionValid()&&this.save("n")},e.prototype.passengersEdited=function(){var e=this;this.initFinished&&this.locked&&(this.nameSectionSubmitted=!1,this.getRequestId().then(function(){e.save("n")}))},e.prototype.passengerErrorClass=function(){return this.Request.Passengers.$dirty||this.nameSectionSubmitted?this.Request.Passengers.$valid?"has-success":"has-error":""},e.prototype.nameErrorClass=function(){return this.Request.Name.$dirty||this.nameSectionSubmitted?this.Request.Name.$valid?"has-success":"has-error":""},e.prototype.emailErrorClass=function(){return this.Request.EMail.$dirty||this.nameSectionSubmitted?this.Request.EMail.$valid?"has-success":"has-error":""},e.prototype.telephoneErrorClass=function(){return this.Request.Telephone.$dirty||this.nameSectionSubmitted?this.Request.Telephone.$valid?"has-success":"has-error":""},e.prototype.nameSectionValid=function(){return this.Request.$valid},e.prototype.submitNameSection=function(){var e=this;this.nameSectionSubmitted=!0,this.analyticsService.buttonclick("passengers"),this.nameSectionValid()&&(this.offersLoading=!0,this.save().then(function(){e.analyticsService.offersdisplayed(),e.setStatus("o")}))},e.prototype.detectInitialState=function(){var e=this,t=this.locationService.search();t.hasOwnProperty("r")?(this.requestId=t.r,this.requestService.get(t.r).then(function(s){if(e.requestNumber=s.number,s.hasOwnProperty("startLat")&&(e.Request.StartName.$setViewValue(s.startName),e.Request.StartName.$render(),e.StartCountry=s.startCountry,e.StartLat=s.startLat,e.StartLon=s.startLon,e.StartLatLng=new google.maps.LatLng(s.startLat,s.startLon),e.startIsValid=!0,e.Request.TargetName.$setViewValue(s.targetName),e.Request.TargetName.$render(),e.TargetCountry=s.targetCountry,e.TargetLat=s.targetLat,e.TargetLon=s.targetLon,e.TargetLatLng=new google.maps.LatLng(s.targetLat,s.targetLon),e.targetIsValid=!0,e.distance=s.distance,e.duration=s.duration,e.renderMapIfReady(!1)),null!=s.startDate){var r=new Date(s.startDate),i=new Date(s.returnDate);e.Request.StartDate.$setViewValue(r),e.Request.StartDate.$render(),e.StartTime=e.pad2Digits(r.getUTCHours())+":"+e.pad2Digits(r.getUTCMinutes()),e.Request.ReturnDate.$setViewValue(i),e.Request.ReturnDate.$render(),e.ReturnTime=e.pad2Digits(i.getUTCHours())+":"+e.pad2Digits(i.getUTCMinutes()),e.startTimeArrive=s.startTimeArrive,e.startTimeDepart=s.startTimeDepart,e.returnTimeArrive=s.returnTimeArrive,e.returnTimeDepart=s.returnTimeDepart,e.StartTimeMode=s.startTimeMode,e.ReturnTimeMode=s.returnTimeMode}e.busShouldStay=s.busShouldStay,"OneWay"==s.tripType?e.isOneWay=!0:e.isOneWay=!1,s.passengers>0&&(e.Request.Passengers.$setViewValue(s.passengers),e.Request.Passengers.$render()),e.Request.Name.$setViewValue(s.name),e.Request.Name.$render(),e.Request.EMail.$setViewValue(s.email),e.Request.EMail.$render(),e.Request.Telephone.$setViewValue(s.phone),e.Request.Telephone.$render(),e.locked=s.isLocked,e.locked&&("recalc"===t.s?(e.locationService.search("s","n"),t.s="n",s.isOfferExpired=!1):(e.locationService.search("s","o"),t.s="o")),"d"===t.s?(e.utilService.scrollTo("mapPanel"),e.analyticsService.pageview("/app/dates")):"n"===t.s?(e.showNameSection=!0,e.utilService.jumpTo("namePanel"),e.analyticsService.pageview("/app/passengers")):"o"===t.s?(e.locked=!0,e.offersLoading=!0,e.requestService.offers(e.requestId).then(function(t){e.offers=t,angular.forEach(e.offers,function(t){t.safeProductDescription=e.sceService.trustAsHtml(t.productDescription)}),e.offersLoading=!1}),e.showNameSection=!0,e.showOfferSection=!0,e.utilService.jumpTo("offerPanel"),e.analyticsService.pageview("/app/offers")):e.analyticsService.pageview("/app/places"),s.isOfferExpired&&e.locationService.path("/offerExpired/"+e.requestId),e.initFinished=!0},function(t){e.logService.error(t)})):(this.initFinished=!0,this.analyticsService.pageview("/app/places"))},e.prototype.print=function(){this.windowService.print()},e.prototype.showMailForm=function(){this.emailForSending=this.Request.EMail.$modelValue,this.isMailFormShown=!0},e.prototype.sendMail=function(){var e=this;this.emailBeingSent=!0,this.mailerService.sendMail({Id:this.requestId,Type:"offer",Email:this.emailForSending}).then(function(){e.emailBeingSent=!1,e.mailSendSuccess=!0,e.timeoutService(function(){e.mailSendSuccess=!1,e.isMailFormShown=!1},2e3)})},e.$inject=["$location","$log","$sce","$q","$timeout","$window","RequestService","gacService","UtilService","AnalyticsService","MailerService"],e}();angular.module("pfb").controller("RequestController",t)}(t=e.Controllers||(e.Controllers={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s){this.routeParamsService=e,this.requestService=t,this.success=!1,this.request=s.data,this.requestId=this.routeParamsService.requestId,$("body,html").scrollTop(0)}return e.prototype.submit=function(){var e=this;$("body,html").scrollTop(0),this.requestService.update({requestId:this.requestId,hasSpecialRequests:!0,specialRequests:this.SpecialRequests}).then(function(){e.success=!0},function(){})},e.$inject=["$routeParams","RequestService","request"],e}();angular.module("pfb").controller("SpecialRequestController",t)}(t=e.Controllers||(e.Controllers={}))}(pfb||(pfb={})),angular.module("pfb").directive("dateField",function(){return{restrict:"A",require:"ngModel",link:function(e,t,s,r){function i(e){if("undefined"==typeof e)return"";var t=e.getDate(),s=e.getMonth(),r=e.getFullYear();return t+"."+(s+1)+"."+r}r.$formatters.push(i)}}}),angular.module("pfb").directive("viewportHeight",["$window",function(e){return{restrict:"A",link:function(t,s){var r=angular.element(e);t.getWindowDimensions=function(){return{h:r.height(),w:r.width()}},t.$watch(t.getWindowDimensions,function(e,s){t.windowHeight=e.h,t.windowWidth=e.w,t.style=function(){return e.w<768?{}:{"padding-top":(e.h-700)/2,height:e.h-140+"px"}}},!0),r.bind("resize",function(){t.$apply()})}}}]);var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s){this.windowService=e,this.locationService=t,this.logService=s}return e.prototype.pageview=function(e){e?this.ga("send","pageview",{page:e}):this.ga("send","pageview",{page:this.locationService.url()})},e.prototype.buttonclick=function(e){this.ga("send","event","button","click",e)},e.prototype.offersdisplayed=function(){this.ga("send","event","quotation","display","offers")},e.prototype.ga=function(e,t,s,r,i){"function"==typeof this.windowService.ga&&this.windowService.ga(e,t,s,r,i)},e.$inject=["$window","$location","$log"],
e}();angular.module("pfb").service("AnalyticsService",t)}(t=e.Services||(e.Services={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.book=function(e){return this.httpService.post(PFBConfig.apiEndpoint+"booking",e)},e.prototype.pay=function(e){return this.httpService.post(PFBConfig.apiEndpoint+"paymentresult",e)},e.$inject=["$http","$q"],e}();angular.module("pfb").service("BookingService",t)}(t=e.Services||(e.Services={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.autocomplete=function(e){var t=this.qService.defer();return this.httpService.post(PFBConfig.apiEndpoint+"maps/autocomplete",{Input:e}).then(function(e){"OK"==e.statusText?"OK"==e.data.status?t.resolve(e.data.predictions):t.reject(e.data.status):t.reject(e.statusText)},function(e){t.reject(e)}),t.promise},e.prototype.details=function(e){var t=this.qService.defer();return this.httpService.post(PFBConfig.apiEndpoint+"maps/details",{PlaceId:e}).then(function(e){"OK"==e.statusText?"OK"==e.data.status?t.resolve(e.data.result):t.reject(e.data.status):t.reject(e.statusText)},function(e){t.reject(e)}),t.promise},e.$inject=["$http","$q"],e}();angular.module("pfb").service("gacService",t)}(t=e.Services||(e.Services={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.sendMail=function(e){return this.httpService.post(PFBConfig.apiEndpoint+"mailer",e)},e.$inject=["$http","$q"],e}();angular.module("pfb").service("MailerService",t)}(t=e.Services||(e.Services={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.create=function(){var e=this.qService.defer();return this.httpService.post(PFBConfig.apiEndpoint+"request/new",{ClientId:PFBConfig.clientId}).then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise},e.prototype.update=function(e){return this.httpService.post(PFBConfig.apiEndpoint+"request",e)},e.prototype.get=function(e){var t=this.qService.defer();return this.httpService.post(PFBConfig.apiEndpoint+"request",{RequestId:e}).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.offers=function(e){var t=this.qService.defer();return this.httpService.post(PFBConfig.apiEndpoint+"offer?RequestId="+e,null).then(function(e){var s=e.data,r="<b>Kein Angebot m&ouml;glich.</b><div>In dieser Kategorie k&ouml;nnen wir Ihnen momentan leider kein Sofortangebot unterbreiten. Bitte kontaktieren Sie uns f&uuml;r ein individuelles Angebot.</div>";s.length<1&&s.push({productName:"Standard",productDescription:r,noOffer:!0}),s.length<2&&s.push({productName:"Komfort",productDescription:r,noOffer:!0}),s.length<3&&s.push({productName:"Luxus",productDescription:r,noOffer:!0}),t.resolve(s)},function(e){t.reject(e)}),t.promise},e.prototype.offer=function(e,t){var s=this.qService.defer();return this.httpService.post(PFBConfig.apiEndpoint+"offer?RequestId="+e+"&OfferId="+t,null).then(function(e){s.resolve(e.data)},function(e){s.reject(e)}),s.promise},e.$inject=["$http","$q"],e}();angular.module("pfb").service("RequestService",t)}(t=e.Services||(e.Services={}))}(pfb||(pfb={}));var pfb;!function(e){var t;!function(e){var t=function(){function e(e,t,s){this.timeoutService=e,this.logService=t,this.qService=s}return e.prototype.cumulativeOffset=function(e){var t=0,s=0;do t+=e.offsetTop||0,s+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:s}},e.prototype.jumpTo=function(e){var t=this;this.timeoutService(function(){var s=document.getElementById("mainNavbar"),r=s.clientHeight,i=document.getElementById(e),a=t.cumulativeOffset(i).top-r-10;t.logService.info("nav is "+r+" high, jumping to "+a),$("body,html").scrollTop(a)},500)},e.prototype.scrollTo=function(e){var t=this;this.timeoutService(function(){var s=document.getElementById("mainNavbar"),r=s.clientHeight,i=document.getElementById(e),a=t.cumulativeOffset(i).top-r-10;t.logService.info("nav is "+r+" high, scolling to "+a),$("body,html").animate({scrollTop:a},"slow")},500)},e.prototype.preloadImage=function(e){var t=this.qService.defer(),s=new Image;return s.src=e,s.complete?t.resolve():(s.addEventListener("load",function(){t.resolve()}),s.addEventListener("error",function(){t.reject()})),t.promise},e.prototype.getPlaceCountry=function(e){for(var t=0;t<e.address_components.length;t++)for(var s=0;s<e.address_components[t].types.length;s++)if("country"==e.address_components[t].types[s])return e.address_components[t].short_name;return"UNKNOWN"},e.prototype.isoDateString=function(e){if("undefined"==typeof e)return null;var t=e.getDate(),s=e.getMonth(),r=e.getFullYear();return r+"-"+(s+1)+"-"+t},e.$inject=["$timeout","$log","$q"],e}();angular.module("pfb").service("UtilService",t)}(t=e.Services||(e.Services={}))}(pfb||(pfb={}));