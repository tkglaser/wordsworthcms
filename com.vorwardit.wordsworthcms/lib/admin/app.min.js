var app;!function(e){var t=function(){function e(e,t){e.when("/",{templateUrl:"lib/admin/Views/Welcome.html",controller:"WelcomeController"}).when("/sites",{templateUrl:"lib/admin/Views/Sites.html",controller:"SiteController as ctrl"}).when("/layouts",{templateUrl:"lib/admin/Views/Layouts.html",controller:"LayoutController as ctrl"}).when("/pagelayouts",{templateUrl:"lib/admin/Views/PageLayouts.html",controller:"PageLayoutController as ctrl"}).when("/pages",{templateUrl:"lib/admin/Views/Pages.html",controller:"PageController as ctrl"}).when("/assets",{templateUrl:"lib/admin/Views/Assets.html",controller:"AssetController as ctrl"}).when("/content",{templateUrl:"lib/admin/Views/Content.html",controller:"ContentController as ctrl"}).when("/users",{templateUrl:"lib/admin/Views/Users.html",controller:"UserController as ctrl"}).otherwise({redirectTo:"/"})}return e}();t.$inject=["$routeProvider","$locationProvider"];var i=angular.module("app",["ngAnimate","ngRoute"]);i.config(t)}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.AssetService=e,this.SiteService=t,this.assets=[],this.sites=[],this.getData()}return e.prototype.getData=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t,e.site=e.SiteService.getSelectedSite(t),e.AssetService.getData(e.site.siteId).then(function(t){e.assets=t})})},e.prototype.siteChanged=function(){var e=this;this.SiteService.setSelectedSite(this.site),this.AssetService.getData(this.site.siteId).then(function(t){e.assets=t})},e.prototype.create=function(){$("#saveError").hide(),$("#editModal").modal()},e.prototype["delete"]=function(e){$("#deleteError").hide(),this.asset=e,$("#deleteModal").modal()},e.prototype.deleteConfirmed=function(){var e=this;this.AssetService.remove(this.site.siteId,this.asset.name).then(function(){$("#deleteModal").modal("hide"),e.getData()},function(){$("#deleteError").show()})},e.prototype.save=function(){var e=this;this.asset.siteId=this.site.siteId,this.AssetService.upload(this.asset).then(function(){$("#editModal").modal("hide"),e.getData()},function(){$("#saveError").show()})},e.$inject=["AssetService","SiteService"],e}();angular.module("app").controller("AssetController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(t){(function(){function t(e,t){this.ContentService=e,this.SiteService=t,this.sites=[],this.contents=[],this.getData()}return t.prototype.getData=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t,e.site=e.SiteService.getSelectedSite(t),e.ContentService.getBySiteId(e.site.siteId).then(function(t){e.contents=t})})},t.prototype.siteChanged=function(){var e=this;this.SiteService.setSelectedSite(this.site),this.ContentService.getBySiteId(this.site.siteId).then(function(t){e.contents=t})},t.prototype.create=function(){$("#saveError").hide(),this.modalHeading=t.modalHeadingNew,this.content=new e.domain.Content(-1,"","",""),$("#editModal").modal()},t.prototype.edit=function(e){var i=this;this.ContentService.getData(e.contentId).then(function(e){$("#saveError").hide(),i.modalHeading=t.modalHeadingEdit,i.content=e,$("#editModal").modal()})},t.prototype["delete"]=function(e){$("#deleteError").hide(),this.content=e,$("#deleteModal").modal()},t.prototype.deleteConfirmed=function(){var e=this;this.ContentService.remove(this.content.contentId).then(function(){$("#deleteModal").modal("hide"),e.getData()},function(){$("#deleteError").show()})},t.prototype.save=function(){var t=this,i=new e.domain.Content(this.content.contentId,this.site.siteId,this.content.url,this.content.body);this.ContentService.update(i).then(function(){$("#editModal").modal("hide"),t.getData()},function(){$("#saveError").show()})},t.modalHeadingNew="Neuen Content anlegen",t.modalHeadingEdit="Content bearbeiten",t.$inject=["ContentService","SiteService"],t})()}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(t){var i=function(){function t(e,t){this.LayoutService=e,this.SiteService=t,this.getLayouts();var i={name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]};this.editor=CodeMirror.fromTextArea(document.getElementById("htmlEditorLayouts"),{mode:i,selectionPointer:!0,extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}})}return t.prototype.getLayouts=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t,e.site=e.SiteService.getSelectedSite(t),e.LayoutService.getBySiteId(e.site.siteId).then(function(t){e.layouts=t})})},t.prototype.siteChanged=function(){var e=this;this.SiteService.setSelectedSite(this.site),this.LayoutService.getBySiteId(this.site.siteId).then(function(t){e.layouts=t})},t.prototype.create=function(){var i=this;$("#saveError").hide(),this.modalHeading=t.modalHeadingNew,this.layout=new e.domain.Layout("","","",""),this.editor.setValue(""),setTimeout(function(){i.editor.refresh()},200),$("#editModal").modal()},t.prototype.edit=function(e){var i=this;this.LayoutService.getData(e.layoutId).then(function(e){$("#saveError").hide(),i.modalHeading=t.modalHeadingEdit,i.layout=e,i.editor.setValue(i.layout.body),setTimeout(function(){i.editor.refresh()},200),$("#editModal").modal()})},t.prototype["delete"]=function(e){$("#deleteError").hide(),this.layout=e,$("#deleteModal").modal()},t.prototype.deleteConfirmed=function(){var e=this;this.LayoutService.remove(this.layout.layoutId).then(function(){$("#deleteModal").modal("hide"),e.getLayouts()},function(){$("#deleteError").show()})},t.prototype.save=function(){var t=this,i=new e.domain.Layout(this.layout.layoutId,this.layout.siteId,this.layout.name,this.editor.getValue());this.LayoutService.update(i).then(function(){$("#editModal").modal("hide"),t.getLayouts()},function(){$("#saveError").show()})},t.modalHeadingNew="Neuen Auftritt anlegen",t.modalHeadingEdit="Auftritt bearbeiten",t.$inject=["LayoutService","SiteService"],t}();angular.module("app").controller("LayoutController",i)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(t){var i=function(){function t(e){this.UserService=e,this.menuItems=[],this.init()}return t.prototype.init=function(){var t=this;this.UserService.getUser().then(function(i){t.menuItems.push(new e.domain.MenuItem("",!0,"","HAUPTMENÃœ")),i.type<=1&&t.menuItems.push(new e.domain.MenuItem("/layouts",!1,"fa-anchor","Layouts")),i.type<=2&&t.menuItems.push(new e.domain.MenuItem("/assets",!1,"fa-file","Assets")),i.type<=1&&(t.menuItems.push(new e.domain.MenuItem("/content",!1,"fa-clipboard","Content")),t.menuItems.push(new e.domain.MenuItem("/pagelayouts",!1,"fa-book","Seitenlayouts"))),i.type<=2&&t.menuItems.push(new e.domain.MenuItem("/pages",!1,"fa-file","Seiten")),0==i.type&&(t.menuItems.push(new e.domain.MenuItem("",!0,"","ADMINISTRATION")),t.menuItems.push(new e.domain.MenuItem("/sites",!1,"fa-home","Webauftritte")),t.menuItems.push(new e.domain.MenuItem("/users",!1,"fa-users","Nutzerverwaltung")))})},t.$inject=["UserService"],t}();angular.module("app").controller("MenuController",i)}(t=e.controllers||(e.controllers={}))}(app||(app={})),function(){"use strict";function e(e,t,i,n){function o(){i.getData().success(function(e){r.sites=e,r.site=i.getSelectedSite(e),t.getBySiteId(r.site.siteId).success(function(e){r.pages=e}),n.getBySiteId(r.site.siteId).success(function(e){r.pageLayouts=e})})}var r=this;r.title="PageController",r.modalHeadingNew="Neue Seite anlegen",r.modalHeadingEdit="Seite bearbeiten",r.modalHeading=r.modalHeadingEdit,r.pages=[],r.page={},r.pageversions=[],r.pageversion={},r.pageLayouts=[],r.sites=[],r.site={},o(),r.siteChanged=function(){i.setSelectedSite(r.site),t.getBySiteId(r.site.siteId).success(function(e){r.pages=e}),n.getBySiteId(r.site.siteId).success(function(e){r.pageLayouts=e})},r.create=function(){$("#saveError").hide(),r.modalHeading=r.modalHeadingNew,r.page={},r.page.name="",r.page.urls=[{url:"",pageUrlId:-1}],$("#editModal").modal()},r.edit=function(e){t.getData(e.pageId).success(function(e){$("#saveError").hide(),r.modalHeading=r.modalHeadingEdit,r.page=e,$("#editModal").modal()})},r.editContent=function(e){$("#saveContentError").hide(),t.getVersions(e.pageId).success(function(t){t.length>0?r.pageversion=t[0]:r.pageversion={pageId:e.pageId},$("#editContentModal").modal()})},r.showVersions=function(e){$("#publishError").hide(),r.page=e,t.getVersions(e.pageId).success(function(e){r.pageversions=e,$("#publishModal").modal()})},r.newVersion=function(){t.createNewVersion(r.page.pageId).success(function(){t.getVersions(r.page.pageId).success(function(e){r.pageversions=e})})},r.publish=function(e){t.publish(e).then(function(){t.getVersions(r.page.pageId).success(function(e){r.pageversions=e})},function(){$("#publishError").show()})},r.addUrl=function(){r.page.urls.push({url:"",pageUrlId:-1})},r.removeUrl=function(e){var t=r.page.urls.indexOf(e);r.page.urls.splice(t,1)},r["delete"]=function(e){$("#deleteError").hide(),r.page=e,$("#deleteModal").modal()},r.deleteConfirmed=function(){t.remove(r.page.pageId).then(function(){$("#deleteModal").modal("hide"),o()},function(){$("#deleteError").show()})},r.save=function(){var e={PageId:r.page.pageId,Name:r.page.name,PageLayoutId:r.page.pageLayoutId,Urls:r.page.urls};t.update(e).then(function(){$("#editModal").modal("hide"),o()},function(){$("#saveError").show()})},r.saveVersion=function(){var e={PageId:r.pageversion.pageId,Title:r.pageversion.title,MetaDescription:r.pageversion.metaDescription};t.updateVersion(e).then(function(){$("#editContentModal").modal("hide"),o()},function(){$("#saveContentError").show()})}}angular.module("app").controller("PageController",e),e.$inject=["$location","PageFactory","SiteFactory","PageLayoutFactory"]}();var app;!function(e){var t;!function(t){var i=function(){function t(e,t,i){this.LayoutService=e,this.PageLayoutService=t,this.SiteService=i,this.getData();var n={name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]};this.editor=CodeMirror.fromTextArea(document.getElementById("htmlEditorLayouts"),{mode:n,selectionPointer:!0,extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}})}return t.prototype.getData=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t,e.site=e.SiteService.getSelectedSite(t),e.PageLayoutService.getBySiteId(e.site.siteId).then(function(t){e.pagelayouts=t}),e.LayoutService.getBySiteId(e.site.siteId).then(function(t){e.layouts=t})})},t.prototype.siteChanged=function(){var e=this;this.SiteService.setSelectedSite(this.site),this.PageLayoutService.getBySiteId(this.site.siteId).then(function(t){e.pagelayouts=t}),this.LayoutService.getBySiteId(this.site.siteId).then(function(t){e.layouts=t})},t.prototype.create=function(){var i=this;$("#saveError").hide(),this.modalHeading=t.modalHeadingNew,this.pagelayout=new e.domain.PageLayout("","","",""),this.editor.setValue(""),setTimeout(function(){i.editor.refresh()},200),$("#editModal").modal()},t.prototype.edit=function(e){var i=this;this.PageLayoutService.getData(e.pageLayoutId).then(function(e){i.pagelayout=e,$("#saveError").hide(),i.modalHeading=t.modalHeadingEdit,i.editor.setValue(i.pagelayout.body),setTimeout(function(){i.editor.refresh()},200),$("#editModal").modal()})},t.prototype["delete"]=function(e){$("#deleteError").hide(),this.pagelayout=e,$("#deleteModal").modal()},t.prototype.deleteConfirmed=function(){var e=this;this.PageLayoutService.remove(this.pagelayout.pageLayoutId).then(function(){$("#deleteModal").modal("hide"),e.getData()},function(){$("#deleteError").show()})},t.prototype.save=function(){var t=this,i=new e.domain.PageLayout(this.pagelayout.pageLayoutId,this.pagelayout.layoutId,this.pagelayout.name,this.editor.getValue());this.PageLayoutService.update(i).then(function(){$("#editModal").modal("hide"),t.getData()},function(){$("#saveError").show()})},t.modalHeadingNew="Neues Seitenlayout anlegen",t.modalHeadingEdit="Seitenlayout bearbeiten",t.$inject=["LayoutService","PageLayoutService","SiteService"],t}();angular.module("app").controller("PageLayoutController",i)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(t){var i=function(){function t(e){this.SiteService=e,this.getSites(),this.modalHeading=t.modalHeadingEdit}return t.prototype.getSites=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t})},t.prototype.newSite=function(){$("#saveError").hide(),this.modalHeading=t.modalHeadingNew,this.site=new e.domain.Site("","",[]),this.site.name="",this.site.bindings=[{value:""}],$("#editSiteModal").modal()},t.prototype.editSite=function(i){$("#saveError").hide(),this.modalHeading=t.modalHeadingEdit,this.site=new e.domain.Site(i.siteId,i.name,[]);for(var n=0;n<i.bindings.length;++n)this.site.bindings.push({value:i.bindings[n]});$("#editSiteModal").modal()},t.prototype.deleteSite=function(e){$("#deleteError").hide(),this.site=e,$("#deleteSiteModal").modal()},t.prototype.deleteConfirmed=function(){var e=this;this.SiteService.remove(this.site.siteId).then(function(){$("#deleteSiteModal").modal("hide"),e.getSites()},function(){$("#deleteError").show()})},t.prototype.addBinding=function(){this.site.bindings.push({value:""})},t.prototype.removeBinding=function(e){var t=this.site.bindings.indexOf(e);this.site.bindings.splice(t,1)},t.prototype.save=function(){for(var t=this,i=new e.domain.Site(this.site.siteId,this.site.name,[]),n=0;n<this.site.bindings.length;++n)i.bindings.push(this.site.bindings[n].value);this.SiteService.update(i).then(function(){$("#editSiteModal").modal("hide"),t.getSites()},function(){$("#saveError").show()})},t.modalHeadingNew="Neuen Auftritt anlegen",t.modalHeadingEdit="Auftritt bearbeiten",t.$inject=["SiteService"],t}();angular.module("app").controller("SiteController",i)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(t){var i=function(){function t(t,i){this.UserService=t,this.SiteService=i,this.getData(),this.userTypes=e.domain.UserType.allTypes()}return t.prototype.getData=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t}),this.UserService.getAll().then(function(t){e.users=t})},t.prototype.displayUserType=function(e){for(var t=0;t<this.userTypes.length;++t){var i=this.userTypes[t];if(i.id==e)return i.name}return"Unbekannt"},t.prototype.newUser=function(){$("#saveError").hide(),this.modalHeading=t.modalHeadingNew,this.showPasswordBox=!0,this.user=new e.domain.User("","","",2,""),$("#editModal").modal()},t.prototype.editUser=function(i){$("#saveError").hide(),this.modalHeading=t.modalHeadingEdit,this.showPasswordBox=!1,this.user=new e.domain.User(i.userId,i.userName,"",i.type,i.siteId),$("#editModal").modal()},t.prototype.save=function(){var t=this;if(""==this.user.userId){var i=new e.domain.User("",this.user.userName,this.user.password,this.user.type,this.user.siteId);this.UserService.create(i).then(function(){$("#editModal").modal("hide"),t.getData()},function(){$("#saveError").show()})}else{var i=new e.domain.User(this.user.userId,this.user.userName,"",this.user.type,this.user.siteId);this.UserService.update(i).then(function(){$("#editModal").modal("hide"),t.getData()},function(){$("#saveError").show()})}},t.prototype.deleteUser=function(e){$("#deleteError").hide(),this.user=e,$("#deleteModal").modal()},t.prototype.deleteConfirmed=function(){var e=this;this.UserService.remove(this.user.userId).then(function(){$("#deleteModal").modal("hide"),e.getData()},function(){$("#deleteError").show()})},t.modalHeadingNew="Neuen Nutzer anlegen",t.modalHeadingEdit="Nutzer bearbeiten",t.$inject=["UserService","SiteService"],t}();angular.module("app").controller("UserController",i)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(){}return e}();angular.module("app").controller("WelcomeController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={})),function(){"use strict";function e(e,t){function i(e,i,n){var o="active",r=n.activeLink;e.location=t,e.$watch("location.path()",function(e){r===e?i.addClass(o):i.removeClass(o)})}var n={link:i,restrict:"A"};return n}angular.module("app").directive("activeLink",e),e.$inject=["$window","$location"]}(),function(){"use strict";function e(e,t){function i(e,i,n){var o=t(n.fileModel),r=o.assign;i.bind("change",function(){e.$apply(function(){r(e,i[0].files[0])})})}var n={link:i,restrict:"A"};return n}angular.module("app").directive("fileModel",e),e.$inject=["$window","$parse"]}(),function(){"use strict";function e(e,t,i){function n(t,n,o){t.isLoading=function(){return e.pendingRequests.length>0},t.timer=null,t.$watch(t.isLoading,function(e){e?t.timer=i(function(){n.fadeIn(100),t.timer=null},300):(null!=t.timer&&i.cancel(t.timer),n.fadeOut(100))})}var o={link:n,restrict:"A"};return o}angular.module("app").directive("loading",e),e.$inject=["$http","$window","$timeout"]}();var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i,n){this.name=e,this.siteId=t,this.uri=i,this.file=n}return e}();e.Asset=t}(t=e.domain||(e.domain={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i,n){this.contentId=e,this.siteId=t,this.url=i,this.body=n}return e}();e.Content=t}(t=e.domain||(e.domain={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i,n){this.layoutId=e,this.siteId=t,this.name=i,this.body=n}return e}();e.Layout=t}(t=e.domain||(e.domain={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i,n){this.link=e,this.isHeader=t,this.icon=i,this.name=n}return e}();e.MenuItem=t}(t=e.domain||(e.domain={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i,n){this.pageLayoutId=e,this.layoutId=t,this.name=i,this.body=n}return e}();e.PageLayout=t}(t=e.domain||(e.domain={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i){this.siteId=e,this.name=t,this.bindings=i}return e}();e.Site=t}(t=e.domain||(e.domain={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i,n,o){this.userId=e,this.userName=t,this.password=i,this.type=n,this.siteId=o}return e}();e.User=t}(t=e.domain||(e.domain={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.id=e,this.name=t}return e.allTypes=function(){var t=[];return t.push(new e(0,"Administrator")),t.push(new e(1,"Designer")),t.push(new e(2,"Editor")),t},e}();e.UserType=t}(t=e.domain||(e.domain={}))}(app||(app={})),function(){"use strict";function e(e){function t(t){return e.get("/api/page?siteId="+t)}function i(t){return e.get("/api/page/"+t)}function n(t){return e.get("/api/pageversion?pageId="+t)}function o(t){return e.post("/api/page",t)}function r(t){return e.post("/api/pageversion",t)}function a(t){return e.post("/api/pageversion/publish?versionId="+t)}function s(t){return e.post("/api/pageversion/newversion?pageId="+t)}function u(t){return e["delete"]("/api/page/"+t)}var c={getBySiteId:t,getData:i,getVersions:n,update:o,publish:a,createNewVersion:s,updateVersion:r,remove:u};return c}angular.module("app").factory("PageFactory",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function t(t){return e.get("/api/pagelayout?siteId="+t)}function i(t){return e.get("/api/pagelayout/"+t)}function n(t){return e.post("/api/pagelayout",t)}function o(t){return e["delete"]("/api/pagelayout/"+t)}var r={getBySiteId:t,getData:i,update:n,remove:o};return r}angular.module("app").factory("PageLayoutFactory",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t){function i(){return e.get("/api/site")}function n(e){if("undefined"==typeof t.selectedSiteId&&(t.selectedSiteId=adminAppGlobalSettings.defaultSiteId,""==t.selectedSiteId))return t.selectedSiteId=e[0].siteId,e[0];for(var i=0;i<e.length;++i){var n=e[i];if(t.selectedSiteId==n.siteId)return n}}function o(e){t.selectedSiteId=e.siteId}function r(t){return e.post("/api/site",t)}function a(t){return e["delete"]("/api/site/"+t)}var s={getData:i,getSelectedSite:n,setSelectedSite:o,update:r,remove:a};return s}angular.module("app").factory("SiteFactory",e),e.$inject=["$http","$rootScope"]}();var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.getData=function(e){var t=this.qService.defer();return this.httpService.get("/api/asset?siteId="+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getModelAsFormData=function(e){var t=new FormData;return angular.forEach(e,function(e,i){t.append(i,e)}),t},e.prototype.upload=function(e){var t=this.qService.defer();return this.httpService({url:"/AssetUpload/SaveAsset",method:"POST",data:this.getModelAsFormData(e),transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(e){t.resolve(e)}).error(function(e,i){t.reject(i)}),t.promise},e.prototype.remove=function(e,t){return this.httpService["delete"]("/api/asset?name="+t+"&siteId="+e)},e.$inject=["$http","$q"],e}();angular.module("app").service("AssetService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.getBySiteId=function(e){var t=this.qService.defer();return this.httpService.get("/api/content?siteId="+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getData=function(e){var t=this.qService.defer();return this.httpService.get("/api/content/"+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.update=function(e){return this.httpService.post("/api/content",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/content/"+e.toString())},e.$inject=["$http","$q"],e}();angular.module("app").service("ContentService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.getBySiteId=function(e){var t=this,i=t.qService.defer();return this.httpService.get("/api/layout?siteId="+e).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise},e.prototype.getData=function(e){var t=this,i=t.qService.defer();return this.httpService.get("/api/layout/"+e).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise},e.prototype.update=function(e){return this.httpService.post("/api/layout",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/layout/"+e)},e.$inject=["$http","$q"],e}();angular.module("app").service("LayoutService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.getBySiteId=function(e){var t=this.qService.defer();return this.httpService.get("/api/pagelayout?siteId="+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getData=function(e){var t=this.qService.defer();return this.httpService.get("/api/pagelayout/"+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.update=function(e){return this.httpService.post("/api/pagelayout",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/pagelayout/"+e)},e.$inject=["$http","$q"],e}();angular.module("app").service("PageLayoutService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i){this.httpService=e,this.rootScopeService=t,this.qService=i}return e.prototype.getData=function(){var e=this,t=e.qService.defer();return this.httpService.get("/api/site").then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getSelectedSite=function(e){if("undefined"==typeof this.rootScopeService.selectedSiteId&&(this.rootScopeService.selectedSiteId=adminAppGlobalSettings.defaultSiteId,""==this.rootScopeService.selectedSiteId))return this.rootScopeService.selectedSiteId=e[0].siteId,e[0];for(var t=0;t<e.length;++t){var i=e[t];if(this.rootScopeService.selectedSiteId==i.siteId)return i}},e.prototype.setSelectedSite=function(e){this.rootScopeService.selectedSiteId=e.siteId},e.prototype.update=function(e){return this.httpService.post("/api/site",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/site/"+e)},e.$inject=["$http","$rootScope","$q"],e}();angular.module("app").service("SiteService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i){this.httpService=e,this.rootScopeService=t,this.qService=i}return e.prototype.getUser=function(){var e=this,t=this.qService.defer();return"undefined"==typeof this.rootScopeService.appUser?this.httpService.get("/api/user").then(function(i){e.rootScopeService.appUser=i.data,t.resolve(i.data)},function(e){t.reject(e)}):t.resolve(e.rootScopeService.appUser),t.promise},e.prototype.getAll=function(){var e=this.qService.defer();return this.httpService.get("/api/user/all").then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise},e.prototype.create=function(e){return this.httpService.post("/api/user/create",e)},e.prototype.update=function(e){return this.httpService.post("/api/user",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/user/"+e)},e.$inject=["$http","$rootScope","$q"],e}();angular.module("app").service("UserService",t)}(t=e.services||(e.services={}))}(app||(app={}));