var app;!function(e){var t=function(){function e(e,t){e.when("/",{templateUrl:"lib/admin/Views/Welcome.html",controller:"WelcomeController"}).when("/sites",{templateUrl:"lib/admin/Views/Sites.html",controller:"SiteController as ctrl"}).when("/layouts",{templateUrl:"lib/admin/Views/Layouts.html",controller:"LayoutController as ctrl"}).when("/layouts/:id",{templateUrl:"lib/admin/Views/LayoutEdit.html",controller:"LayoutEditController as ctrl"}).when("/pagelayouts",{templateUrl:"lib/admin/Views/PageLayouts.html",controller:"PageLayoutController as ctrl"}).when("/pages",{templateUrl:"lib/admin/Views/Pages.html",controller:"PageController as ctrl"}).when("/assets",{templateUrl:"lib/admin/Views/Assets.html",controller:"AssetController as ctrl"}).when("/content",{templateUrl:"lib/admin/Views/Content.html",controller:"ContentController as ctrl"}).when("/content/:id",{templateUrl:"lib/admin/Views/ContentEdit.html",controller:"ContentEditController as ctrl"}).when("/users",{templateUrl:"lib/admin/Views/Users.html",controller:"UserController as ctrl"}).otherwise({redirectTo:"/"})}return e}();t.$inject=["$routeProvider","$locationProvider"];var i=angular.module("app",["ngAnimate","ngRoute"]);i.config(t)}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.AssetService=e,this.SiteService=t,this.assets=[],this.sites=[],this.getData()}return e.prototype.getData=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t,e.site=e.SiteService.getSelectedSite(t),e.AssetService.getData(e.site.siteId).then(function(t){e.assets=t})})},e.prototype.siteChanged=function(){var e=this;this.SiteService.setSelectedSite(this.site),this.AssetService.getData(this.site.siteId).then(function(t){e.assets=t})},e.prototype.create=function(){$("#saveError").hide(),$("#editModal").modal()},e.prototype["delete"]=function(e){$("#deleteError").hide(),this.asset=e,$("#deleteModal").modal()},e.prototype.deleteConfirmed=function(){var e=this;this.AssetService.remove(this.site.siteId,this.asset.name).then(function(){$("#deleteModal").modal("hide"),e.getData()},function(){$("#deleteError").show()})},e.prototype.save=function(){var e=this;this.asset.siteId=this.site.siteId,this.AssetService.upload(this.asset).then(function(){$("#editModal").modal("hide"),e.getData()},function(){$("#saveError").show()})},e.$inject=["AssetService","SiteService"],e}();angular.module("app").controller("AssetController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.ContentService=e,this.SiteService=t,this.sites=[],this.contents=[],this.getData()}return e.prototype.getData=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t,e.site=e.SiteService.getSelectedSite(t),e.ContentService.getBySiteId(e.site.siteId).then(function(t){e.contents=t})})},e.prototype.siteChanged=function(){var e=this;this.SiteService.setSelectedSite(this.site),this.ContentService.getBySiteId(this.site.siteId).then(function(t){e.contents=t})},e.prototype["delete"]=function(e){$("#deleteError").hide(),this.content=e,$("#deleteModal").modal()},e.prototype.deleteConfirmed=function(){var e=this;this.ContentService.remove(this.content.contentId).then(function(){$("#deleteModal").modal("hide"),e.getData()},function(){$("#deleteError").show()})},e.modalHeadingNew="Neuen Content anlegen",e.modalHeadingEdit="Content bearbeiten",e.$inject=["ContentService","SiteService"],e}();angular.module("app").controller("ContentController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i,n){this.RouteParamsService=e,this.LocationService=t,this.ContentService=i,this.SiteService=n,this.sites=[];var o,r=e.id;o="new"==r?-1:parseInt(r),this.getContent(o);var a={name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]};this.editor=CodeMirror.fromTextArea(document.getElementById("htmlEditorContent"),{mode:a,selectionPointer:!0,extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}})}return e.prototype.getContent=function(e){var t=this;this.SiteService.getData().then(function(i){t.sites=i,t.site=t.SiteService.getSelectedSite(i),-1==e?(t.content={contentId:-1,siteId:t.site.siteId,url:"",body:""},t.editor.setValue(""),setTimeout(function(){t.editor.refresh()},200)):t.ContentService.getData(e).then(function(e){t.content=e,t.editor.setValue(t.content.body),setTimeout(function(){t.editor.refresh()},200)})})},e.prototype.save=function(){var e=this;this.content.body=this.editor.getValue(),this.ContentService.update(this.content).then(function(){e.LocationService.path("/content")},function(){$("#saveError").show()})},e.$inject=["$routeParams","$location","ContentService","SiteService"],e}();angular.module("app").controller("ContentEditController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.LayoutService=e,this.SiteService=t,this.getLayouts()}return e.prototype.getLayouts=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t,e.site=e.SiteService.getSelectedSite(t),e.LayoutService.getBySiteId(e.site.siteId).then(function(t){e.layouts=t})})},e.prototype.siteChanged=function(){var e=this;this.SiteService.setSelectedSite(this.site),this.LayoutService.getBySiteId(this.site.siteId).then(function(t){e.layouts=t})},e.prototype["delete"]=function(e){$("#deleteError").hide(),this.layout=e,$("#deleteModal").modal()},e.prototype.deleteConfirmed=function(){var e=this;this.LayoutService.remove(this.layout.layoutId).then(function(){$("#deleteModal").modal("hide"),e.getLayouts()},function(){$("#deleteError").show()})},e.$inject=["LayoutService","SiteService"],e}();angular.module("app").controller("LayoutController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i,n){this.RouteParamsService=e,this.LocationService=t,this.LayoutService=i,this.SiteService=n;var o=e.id;this.getLayout(o);var r={name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]};this.editor=CodeMirror.fromTextArea(document.getElementById("htmlEditorLayouts"),{mode:r,selectionPointer:!0,extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}})}return e.prototype.getLayout=function(e){var t=this;this.SiteService.getData().then(function(i){t.sites=i,t.site=t.SiteService.getSelectedSite(i),"new"==e?(t.layout={layoutId:"",siteId:t.site.siteId,body:"",name:""},t.editor.setValue(""),setTimeout(function(){t.editor.refresh()},200)):t.LayoutService.getData(e).then(function(e){t.layout=e,t.editor.setValue(t.layout.body),setTimeout(function(){t.editor.refresh()},200)})})},e.prototype.save=function(){var e=this;this.layout.body=this.editor.getValue(),this.LayoutService.update(this.layout).then(function(){e.LocationService.path("/layouts")},function(){$("#saveError").show()})},e.$inject=["$routeParams","$location","LayoutService","SiteService"],e}();angular.module("app").controller("LayoutEditController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e){this.UserService=e,this.menuItems=[],this.init()}return e.prototype.init=function(){var e=this;this.UserService.getUser().then(function(t){e.menuItems.push({link:"",isHeader:!0,icon:"",name:"HAUPTMENÃœ"}),t.type<=1&&e.menuItems.push({link:"/layouts",isHeader:!1,icon:"fa-anchor",name:"Layouts"}),t.type<=2&&e.menuItems.push({link:"/assets",isHeader:!1,icon:"fa-file",name:"Assets"}),t.type<=1&&(e.menuItems.push({link:"/content",isHeader:!1,icon:"fa-clipboard",name:"Content"}),e.menuItems.push({link:"/pagelayouts",isHeader:!1,icon:"fa-book",name:"Seitenlayouts"})),t.type<=2&&e.menuItems.push({link:"/pages",isHeader:!1,icon:"fa-file",name:"Seiten"}),0==t.type&&(e.menuItems.push({link:"",isHeader:!0,icon:"",name:"ADMINISTRATION"}),e.menuItems.push({link:"/sites",isHeader:!1,icon:"fa-home",name:"Webauftritte"}),e.menuItems.push({link:"/users",isHeader:!1,icon:"fa-users",name:"Nutzerverwaltung"}))})},e.$inject=["UserService"],e}();angular.module("app").controller("MenuController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i){this.PageService=e,this.SiteService=t,this.PageLayoutService=i,this.pages=[],this.pageversions=[],this.pageLayouts=[],this.sites=[],this.getData()}return e.prototype.getData=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t,e.site=e.SiteService.getSelectedSite(t),e.PageService.getBySiteId(e.site.siteId).then(function(t){e.pages=t}),e.PageLayoutService.getBySiteId(e.site.siteId).then(function(t){e.pageLayouts=t})})},e.prototype.siteChanged=function(){var e=this;this.SiteService.setSelectedSite(this.site),this.PageService.getBySiteId(this.site.siteId).then(function(t){e.pages=t}),this.PageLayoutService.getBySiteId(this.site.siteId).then(function(t){e.pageLayouts=t})},e.prototype.create=function(){$("#saveError").hide(),this.modalHeading=e.modalHeadingNew,this.page={pageId:"",pageLayoutId:"",name:"",urls:[{url:"",pageUrlId:-1}]},$("#editModal").modal()},e.prototype.edit=function(t){var i=this;this.PageService.getData(t.pageId).then(function(t){$("#saveError").hide(),i.modalHeading=e.modalHeadingEdit,i.page=t,$("#editModal").modal()})},e.prototype.editContent=function(e){var t=this;$("#saveContentError").hide(),this.PageService.getVersions(e.pageId).then(function(i){i.length>0?t.pageversion=i[0]:t.pageversion={pageId:e.pageId,title:"",metaDescription:""},$("#editContentModal").modal()})},e.prototype.showVersions=function(e){var t=this;$("#publishError").hide(),this.page=e,this.PageService.getVersions(e.pageId).then(function(e){t.pageversions=e,$("#publishModal").modal()})},e.prototype.newVersion=function(){var e=this;this.PageService.createNewVersion(this.page.pageId).then(function(){e.PageService.getVersions(e.page.pageId).then(function(t){e.pageversions=t})})},e.prototype.publish=function(e){var t=this;this.PageService.publish(e).then(function(){t.PageService.getVersions(t.page.pageId).then(function(e){t.pageversions=e})},function(){$("#publishError").show()})},e.prototype.addUrl=function(){this.page.urls.push({pageUrlId:-1,url:""})},e.prototype.removeUrl=function(e){var t=this.page.urls.indexOf(e);this.page.urls.splice(t,1)},e.prototype["delete"]=function(e){$("#deleteError").hide(),this.page=e,$("#deleteModal").modal()},e.prototype.deleteConfirmed=function(){var e=this;this.PageService.remove(this.page.pageId).then(function(){$("#deleteModal").modal("hide"),e.getData()},function(){$("#deleteError").show()})},e.prototype.save=function(){var e=this;this.PageService.update(this.page).then(function(){$("#editModal").modal("hide"),e.getData()},function(){$("#saveError").show()})},e.prototype.saveVersion=function(){var e=this;this.PageService.updateVersion(this.pageversion).then(function(){$("#editContentModal").modal("hide"),e.getData()},function(){$("#saveContentError").show()})},e.modalHeadingNew="Neue Seite anlegen",e.modalHeadingEdit="Seite bearbeiten",e.$inject=["PageService","SiteService","PageLayoutService"],e}();angular.module("app").controller("PageController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i){this.LayoutService=e,this.PageLayoutService=t,this.SiteService=i,this.getData();var n={name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]};this.editor=CodeMirror.fromTextArea(document.getElementById("htmlEditorPageLayout"),{mode:n,selectionPointer:!0,extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}})}return e.prototype.getData=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t,e.site=e.SiteService.getSelectedSite(t),e.PageLayoutService.getBySiteId(e.site.siteId).then(function(t){e.pagelayouts=t}),e.LayoutService.getBySiteId(e.site.siteId).then(function(t){e.layouts=t})})},e.prototype.siteChanged=function(){var e=this;this.SiteService.setSelectedSite(this.site),this.PageLayoutService.getBySiteId(this.site.siteId).then(function(t){e.pagelayouts=t}),this.LayoutService.getBySiteId(this.site.siteId).then(function(t){e.layouts=t})},e.prototype.create=function(){var t=this;$("#saveError").hide(),this.modalHeading=e.modalHeadingNew,this.pagelayout={pageLayoutId:"",layoutId:"",name:"",body:""},this.editor.setValue(""),setTimeout(function(){t.editor.refresh()},200),$("#editModal").modal()},e.prototype.edit=function(t){var i=this;this.PageLayoutService.getData(t.pageLayoutId).then(function(t){i.pagelayout=t,$("#saveError").hide(),i.modalHeading=e.modalHeadingEdit,i.editor.setValue(i.pagelayout.body),setTimeout(function(){i.editor.refresh()},200),$("#editModal").modal()})},e.prototype["delete"]=function(e){$("#deleteError").hide(),this.pagelayout=e,$("#deleteModal").modal()},e.prototype.deleteConfirmed=function(){var e=this;this.PageLayoutService.remove(this.pagelayout.pageLayoutId).then(function(){$("#deleteModal").modal("hide"),e.getData()},function(){$("#deleteError").show()})},e.prototype.save=function(){var e=this;this.pagelayout.body=this.editor.getValue(),this.PageLayoutService.update(this.pagelayout).then(function(){$("#editModal").modal("hide"),e.getData()},function(){$("#saveError").show()})},e.modalHeadingNew="Neues Seitenlayout anlegen",e.modalHeadingEdit="Seitenlayout bearbeiten",e.$inject=["LayoutService","PageLayoutService","SiteService"],e}();angular.module("app").controller("PageLayoutController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(t){this.SiteService=t,this.getSites(),this.modalHeading=e.modalHeadingEdit}return e.prototype.getSites=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t})},e.prototype.newSite=function(){$("#saveError").hide(),this.modalHeading=e.modalHeadingNew,this.site={siteId:"",name:"",bindings:[]},this.site.name="",this.site.bindings=[{value:""}],$("#editSiteModal").modal()},e.prototype.editSite=function(t){$("#saveError").hide(),this.modalHeading=e.modalHeadingEdit,this.site={siteId:t.siteId,name:t.name,bindings:[]};for(var i=0;i<t.bindings.length;++i)this.site.bindings.push({value:t.bindings[i]});$("#editSiteModal").modal()},e.prototype.deleteSite=function(e){$("#deleteError").hide(),this.site=e,$("#deleteSiteModal").modal()},e.prototype.deleteConfirmed=function(){var e=this;this.SiteService.remove(this.site.siteId).then(function(){$("#deleteSiteModal").modal("hide"),e.getSites()},function(){$("#deleteError").show()})},e.prototype.addBinding=function(){this.site.bindings.push({value:""})},e.prototype.removeBinding=function(e){var t=this.site.bindings.indexOf(e);this.site.bindings.splice(t,1)},e.prototype.save=function(){for(var e=this,t={siteId:this.site.siteId,name:this.site.name,bindings:[]},i=0;i<this.site.bindings.length;++i)t.bindings.push(this.site.bindings[i].value);this.SiteService.update(t).then(function(){$("#editSiteModal").modal("hide"),e.getSites()},function(){$("#saveError").show()})},e.modalHeadingNew="Neuen Auftritt anlegen",e.modalHeadingEdit="Auftritt bearbeiten",e.$inject=["SiteService"],e}();angular.module("app").controller("SiteController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(t){var i=function(){function t(t,i){this.UserService=t,this.SiteService=i,this.getData(),this.userTypes=e.domain.UserType.allTypes()}return t.prototype.getData=function(){var e=this;this.SiteService.getData().then(function(t){e.sites=t}),this.UserService.getAll().then(function(t){e.users=t})},t.prototype.displayUserType=function(e){for(var t=0;t<this.userTypes.length;++t){var i=this.userTypes[t];if(i.id==e)return i.name}return"Unbekannt"},t.prototype.newUser=function(){$("#saveError").hide(),this.modalHeading=t.modalHeadingNew,this.showPasswordBox=!0,this.user={userId:"",userName:"",password:"",type:2,siteId:""},$("#editModal").modal()},t.prototype.editUser=function(e){$("#saveError").hide(),this.modalHeading=t.modalHeadingEdit,this.showPasswordBox=!1,this.user={userId:e.userId,userName:e.userName,password:"",type:e.type,siteId:e.siteId},$("#editModal").modal()},t.prototype.save=function(){var e=this;""==this.user.userId?this.UserService.create(this.user).then(function(){$("#editModal").modal("hide"),e.getData()},function(){$("#saveError").show()}):(this.user.password="",this.UserService.update(this.user).then(function(){$("#editModal").modal("hide"),e.getData()},function(){$("#saveError").show()}))},t.prototype.deleteUser=function(e){$("#deleteError").hide(),this.user=e,$("#deleteModal").modal()},t.prototype.deleteConfirmed=function(){var e=this;this.UserService.remove(this.user.userId).then(function(){$("#deleteModal").modal("hide"),e.getData()},function(){$("#deleteError").show()})},t.modalHeadingNew="Neuen Nutzer anlegen",t.modalHeadingEdit="Nutzer bearbeiten",t.$inject=["UserService","SiteService"],t}();angular.module("app").controller("UserController",i)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(){}return e}();angular.module("app").controller("WelcomeController",t)}(t=e.controllers||(e.controllers={}))}(app||(app={}));var app;!function(e){var t;!function(e){function t(e,t){function i(e,i,n){var o="active",r=n.activeLink;e.location=t,e.$watch("location.path()",function(e){r===e?i.addClass(o):i.removeClass(o)})}var n={link:i,restrict:"A"};return n}t.$inject=["$window","$location"],angular.module("app").directive("activeLink",t)}(t=e.directives||(e.directives={}))}(app||(app={}));var app;!function(e){var t;!function(e){function t(e,t){function i(e,i,n){var o=t(n.fileModel),r=o.assign;i.bind("change",function(){e.$apply(function(){r(e,i[0].files[0])})})}var n={link:i,restrict:"A"};return n}t.$inject=["$window","$parse"],angular.module("app").directive("fileModel",t)}(t=e.directives||(e.directives={}))}(app||(app={}));var app;!function(e){var t;!function(e){function t(e,t,i){function n(t,n,o){t.isLoading=function(){return e.pendingRequests.length>0},t.timer=null,t.$watch(t.isLoading,function(e){e?t.timer=i(function(){n.fadeIn(100),t.timer=null},300):(null!=t.timer&&i.cancel(t.timer),n.fadeOut(100))})}var o={link:n,restrict:"A"};return o}t.$inject=["$http","$window","$timeout"],angular.module("app").directive("loading",t)}(t=e.directives||(e.directives={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.id=e,this.name=t}return e.allTypes=function(){var t=[];return t.push(new e(0,"Administrator")),t.push(new e(1,"Designer")),t.push(new e(2,"Editor")),t},e}();e.UserType=t}(t=e.domain||(e.domain={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.getData=function(e){var t=this.qService.defer();return this.httpService.get("/api/asset?siteId="+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getModelAsFormData=function(e){var t=new FormData;return angular.forEach(e,function(e,i){t.append(i,e)}),t},e.prototype.upload=function(e){var t=this.qService.defer();return this.httpService({url:"/AssetUpload/SaveAsset",method:"POST",data:this.getModelAsFormData(e),transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(e){t.resolve(e)}).error(function(e,i){t.reject(i)}),t.promise},e.prototype.remove=function(e,t){return this.httpService["delete"]("/api/asset?name="+t+"&siteId="+e)},e.$inject=["$http","$q"],e}();angular.module("app").service("AssetService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.getBySiteId=function(e){var t=this.qService.defer();return this.httpService.get("/api/content?siteId="+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getData=function(e){var t=this.qService.defer();return this.httpService.get("/api/content/"+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.update=function(e){return this.httpService.post("/api/content",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/content/"+e.toString())},e.$inject=["$http","$q"],e}();angular.module("app").service("ContentService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.getBySiteId=function(e){var t=this.qService.defer();return this.httpService.get("/api/layout?siteId="+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getData=function(e){var t=this.qService.defer();return this.httpService.get("/api/layout/"+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.update=function(e){return this.httpService.post("/api/layout",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/layout/"+e)},e.$inject=["$http","$q"],e}();angular.module("app").service("LayoutService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.getBySiteId=function(e){var t=this.qService.defer();return this.httpService.get("/api/pagelayout?siteId="+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getData=function(e){var t=this.qService.defer();return this.httpService.get("/api/pagelayout/"+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.update=function(e){return this.httpService.post("/api/pagelayout",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/pagelayout/"+e)},e.$inject=["$http","$q"],e}();angular.module("app").service("PageLayoutService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t){this.httpService=e,this.qService=t}return e.prototype.getBySiteId=function(e){var t=this.qService.defer();return this.httpService.get("/api/page?siteId="+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getData=function(e){var t=this.qService.defer();return this.httpService.get("/api/page/"+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.getVersions=function(e){var t=this.qService.defer();return this.httpService.get("/api/pageversion?pageId="+e).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},e.prototype.update=function(e){return this.httpService.post("/api/page",e)},e.prototype.updateVersion=function(e){return this.httpService.post("/api/pageversion",e)},e.prototype.publish=function(e){return this.httpService.post("/api/pageversion/publish?versionId="+e,null)},e.prototype.createNewVersion=function(e){return this.httpService.post("/api/pageversion/newversion?pageId="+e,null)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/page/"+e)},e.$inject=["$http","$q"],e}();angular.module("app").service("PageService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i){this.httpService=e,this.rootScopeService=t,this.qService=i}return e.prototype.getData=function(){var e=this.qService.defer();return this.httpService.get("/api/site").then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise},e.prototype.getSelectedSite=function(e){if("undefined"==typeof this.rootScopeService.selectedSiteId&&(this.rootScopeService.selectedSiteId=adminAppGlobalSettings.defaultSiteId,""==this.rootScopeService.selectedSiteId))return this.rootScopeService.selectedSiteId=e[0].siteId,e[0];for(var t=0;t<e.length;++t){var i=e[t];if(this.rootScopeService.selectedSiteId==i.siteId)return i}},e.prototype.setSelectedSite=function(e){this.rootScopeService.selectedSiteId=e.siteId},e.prototype.update=function(e){return this.httpService.post("/api/site",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/site/"+e)},e.$inject=["$http","$rootScope","$q"],e}();angular.module("app").service("SiteService",t)}(t=e.services||(e.services={}))}(app||(app={}));var app;!function(e){var t;!function(e){var t=function(){function e(e,t,i){this.httpService=e,this.rootScopeService=t,this.qService=i}return e.prototype.getUser=function(){var e=this,t=this.qService.defer();return"undefined"==typeof this.rootScopeService.appUser?this.httpService.get("/api/user").then(function(i){e.rootScopeService.appUser=i.data,t.resolve(i.data)},function(e){t.reject(e)}):t.resolve(this.rootScopeService.appUser),t.promise},e.prototype.getAll=function(){var e=this.qService.defer();return this.httpService.get("/api/user/all").then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise},e.prototype.create=function(e){return this.httpService.post("/api/user/create",e)},e.prototype.update=function(e){return this.httpService.post("/api/user",e)},e.prototype.remove=function(e){return this.httpService["delete"]("/api/user/"+e)},e.$inject=["$http","$rootScope","$q"],e}();angular.module("app").service("UserService",t)}(t=e.services||(e.services={}))}(app||(app={}));